<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roteiro Pr√°tico - M√©todos Quantitativos e Amostragem</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', system-ui, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0, 82, 204, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            animation: fadeInUp 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .badge {
            background: linear-gradient(135deg, #0052cc, #003d99);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: 600;
            display: inline-block;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0, 82, 204, 0.3);
        }

        .stats-badge {
            background: linear-gradient(135deg, #e91e63, #ad1457);
            color: white;
            padding: 6px 14px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: 600;
            display: inline-block;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(233, 30, 99, 0.3);
        }

        .title {
            font-size: 2.5rem;
            font-weight: 700;
            color: #1a1a1a;
            margin-bottom: 12px;
            background: linear-gradient(135deg, #0052cc, #003d99);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            font-size: 1.2rem;
            color: #666;
            font-weight: 400;
            margin-bottom: 30px;
        }

        .step-container {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            border-left: 6px solid #0052cc;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 25px rgba(0, 82, 204, 0.1);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .step-container:hover {
            transform: translateY(-5px);
        }

        .step-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .step-number {
            background: linear-gradient(135deg, #0052cc, #003d99);
            color: white;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 18px;
            flex-shrink: 0;
            box-shadow: 0 4px 15px rgba(0, 82, 204, 0.3);
        }

        .step-title {
            color: #0052cc;
            font-size: 1.5rem;
            font-weight: 600;
            margin: 0;
        }

        .step-description {
            color: #444;
            line-height: 1.7;
            font-size: 1.1rem;
            margin-bottom: 20px;
        }

        .theory-box {
            background: rgba(233, 30, 99, 0.1);
            border: 2px solid rgba(233, 30, 99, 0.3);
            border-radius: 16px;
            padding: 20px;
            margin: 20px 0;
        }

        .theory-box h4 {
            color: #e91e63;
            font-size: 1.2rem;
            margin-bottom: 12px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .code-block {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 25px;
            border-radius: 12px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
            line-height: 1.6;
            overflow-x: auto;
            margin: 20px 0;
            border-left: 4px solid #0052cc;
            position: relative;
        }

        .code-header {
            background: #2d2d2d;
            color: #ffffff;
            padding: 10px 20px;
            margin: -25px -25px 15px -25px;
            border-radius: 12px 12px 0 0;
            font-size: 12px;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .copy-button {
            background: #0052cc;
            color: white;
            border: none;
            padding: 5px 12px;
            border-radius: 6px;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .copy-button:hover {
            background: #003d99;
            transform: scale(1.05);
        }

        .output-example {
            background: rgba(76, 175, 80, 0.1);
            border: 2px solid rgba(76, 175, 80, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin: 15px 0;
            font-family: monospace;
            font-size: 13px;
        }

        .output-header {
            color: #388e3c;
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .highlight-box {
            background: linear-gradient(135deg, #0052cc, #003d99);
            color: white;
            padding: 25px;
            border-radius: 16px;
            margin: 25px 0;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 25px rgba(0, 82, 204, 0.3);
        }

        .highlight-box h4 {
            font-size: 1.3rem;
            margin-bottom: 12px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .warning-box {
            background: rgba(255, 193, 7, 0.1);
            border: 2px solid rgba(255, 193, 7, 0.3);
            border-radius: 16px;
            padding: 20px;
            margin: 20px 0;
        }

        .warning-box h4 {
            color: #f57c00;
            font-size: 1.2rem;
            margin-bottom: 12px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .info-panel {
            background: rgba(33, 150, 243, 0.1);
            border: 2px solid rgba(33, 150, 243, 0.2);
            border-radius: 16px;
            padding: 20px;
            margin: 20px 0;
        }

        .info-panel h4 {
            color: #1976d2;
            font-size: 1.2rem;
            margin-bottom: 12px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .button {
            background: linear-gradient(135deg, #0052cc, #003d99);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-weight: 600;
            font-size: 16px;
            text-decoration: none;
            display: inline-block;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 15px rgba(0, 82, 204, 0.3);
            margin: 10px 10px 10px 0;
        }

        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 82, 204, 0.4);
            text-decoration: none;
            color: white;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }

        .list {
            margin: 15px 0;
            padding-left: 0;
            list-style: none;
        }

        .list li {
            color: #444;
            line-height: 1.7;
            margin-bottom: 12px;
            position: relative;
            padding-left: 25px;
        }

        .list li::before {
            content: '‚ñ∂';
            color: #0052cc;
            position: absolute;
            left: 0;
            font-size: 14px;
            top: 2px;
        }

        .explanation-box {
            background: rgba(255, 255, 255, 0.5);
            border-radius: 12px;
            padding: 20px;
            margin: 15px 0;
            border-left: 4px solid #0052cc;
        }

        .explanation-box h5 {
            color: #0052cc;
            font-size: 1.1rem;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .explanation-box p {
            color: #555;
            line-height: 1.6;
            font-size: 0.95rem;
        }

        .formula-box {
            background: rgba(248, 249, 250, 0.9);
            border: 2px solid rgba(0, 82, 204, 0.1);
            border-radius: 12px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
            font-family: 'Courier New', monospace;
            font-size: 1.1rem;
            color: #333;
        }

        .syntax-keyword { color: #569cd6; }
        .syntax-string { color: #ce9178; }
        .syntax-comment { color: #6a9955; }
        .syntax-number { color: #b5cea8; }
        .syntax-function { color: #dcdcaa; }

        /* Anima√ß√£o para feedback do bot√£o de copiar */
        .copy-button.copied {
            background: #28a745 !important;
            transform: scale(0.95);
        }

        .copy-success {
            animation: copyFeedback 2s ease-in-out;
        }

        @keyframes copyFeedback {
            0% { background: #0052cc; }
            50% { background: #28a745; }
            100% { background: #0052cc; }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 25px;
                margin: 10px;
            }

            .title {
                font-size: 2rem;
            }

            .step-container {
                padding: 20px;
            }

            .code-block {
                padding: 15px;
                font-size: 12px;
            }

            .step-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }

            .step-number {
                width: 35px;
                height: 35px;
                font-size: 16px;
            }

            .step-title {
                font-size: 1.3rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="badge">üìä Roteiro Pr√°tico - Aula 3</div>
            <h1 class="title">M√©todos Quantitativos e Amostragem</h1>
            <p class="subtitle">Aplicando estat√≠stica descritiva e t√©cnicas de amostragem em dados estruturados</p>
        </div>

        <div class="highlight-box">
            <h4>üéØ O que vamos aprender hoje</h4>
            <p>Aplicaremos m√©todos quantitativos aos dados estruturados da aula anterior, explorando diferentes t√©cnicas de amostragem, analisando distribui√ß√µes de dados e demonstrando o Teorema Central do Limite na pr√°tica. Tamb√©m prepararemos o dataset para o Checkpoint 1 do projeto.</p>
        </div>

        <div class="info-panel">
            <h4>üìù Prepara√ß√£o</h4>
            <p>Acesse <strong>colab.research.google.com</strong> e crie um novo notebook. Renomeie para "Aula3_Metodos_Quantitativos". Este roteiro utiliza os dados estruturados da aula anterior como base para an√°lises estat√≠sticas.</p>
        </div>

        <!-- Passo 1: Configura√ß√£o e Carregamento -->
        <div class="step-container">
            <div class="step-header">
                <div class="step-number">1</div>
                <h2 class="step-title">Configura√ß√£o e Prepara√ß√£o dos Dados</h2>
            </div>
            <div class="stats-badge">üìä Prepara√ß√£o Estat√≠stica</div>
            <p class="step-description">Come√ßamos configurando o ambiente e carregando os dados estruturados. Vamos simular que j√° temos os dados da modelagem dimensional da aula anterior e adicionar algumas funcionalidades estat√≠sticas.</p>
            
            <div class="theory-box">
                <h4>üßÆ Fundamentos Estat√≠sticos</h4>
                <p>A estat√≠stica descritiva nos permite compreender os dados atrav√©s de medidas de posi√ß√£o, dispers√£o e forma. Antes de aplicar modelos complexos, precisamos entender a natureza dos nossos dados atrav√©s de an√°lises explorat√≥rias quantitativas.</p>
            </div>
            
            <div class="code-block">
                <div class="code-header">
                    <span>üîß Configura√ß√£o do Ambiente Estat√≠stico</span>
                    <button class="copy-button" onclick="copyCode(this)">Copiar</button>
                </div>
<pre><code><span class="syntax-comment"># -*- coding: utf-8 -*-</span>
<span class="syntax-comment">"""
# Data Science - Aula 3: M√©todos Quantitativos e Amostragem
## Aplica√ß√£o pr√°tica de estat√≠stica em dados estruturados

**Objetivo:** Aplicar t√©cnicas de amostragem e an√°lise quantitativa aos dados
do e-commerce estruturados na aula anterior
"""</span>

<span class="syntax-comment"># Importa√ß√µes para an√°lise estat√≠stica</span>
<span class="syntax-keyword">import</span> pandas <span class="syntax-keyword">as</span> pd
<span class="syntax-keyword">import</span> numpy <span class="syntax-keyword">as</span> np
<span class="syntax-keyword">import</span> matplotlib.pyplot <span class="syntax-keyword">as</span> plt
<span class="syntax-keyword">import</span> seaborn <span class="syntax-keyword">as</span> sns
<span class="syntax-keyword">import</span> scipy.stats <span class="syntax-keyword">as</span> stats
<span class="syntax-keyword">from</span> datetime <span class="syntax-keyword">import</span> datetime, timedelta
<span class="syntax-keyword">import</span> warnings
warnings.filterwarnings(<span class="syntax-string">'ignore'</span>)

<span class="syntax-comment"># Configura√ß√£o para an√°lise estat√≠stica</span>
plt.style.use(<span class="syntax-string">'seaborn-v0_8'</span>)
sns.set_palette(<span class="syntax-string">"viridis"</span>)
np.random.seed(<span class="syntax-number">42</span>)  <span class="syntax-comment"># Reprodutibilidade</span>

<span class="syntax-comment"># Configura√ß√µes de visualiza√ß√£o</span>
plt.rcParams[<span class="syntax-string">'figure.figsize'</span>] = (<span class="syntax-number">12</span>, <span class="syntax-number">8</span>)
plt.rcParams[<span class="syntax-string">'font.size'</span>] = <span class="syntax-number">10</span>

<span class="syntax-function">print</span>(<span class="syntax-string">"‚úÖ Ambiente estat√≠stico configurado!"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">"üìä Iniciando an√°lise quantitativa..."</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"üî¢ NumPy vers√£o: {np.__version__}"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"üìà SciPy dispon√≠vel para testes estat√≠sticos"</span>)</code></pre>
            </div>

            <div class="explanation-box">
                <h5>üîç Ferramentas Estat√≠sticas:</h5>
                <p><strong>SciPy:</strong> Biblioteca para testes estat√≠sticos e distribui√ß√µes | <strong>Seaborn:</strong> Visualiza√ß√µes estat√≠sticas avan√ßadas | <strong>Configura√ß√µes:</strong> Tamanho adequado para gr√°ficos estat√≠sticos e paleta de cores cient√≠fica</p>
            </div>

            <div class="code-block">
                <div class="code-header">
                    <span>üîÑ Recria√ß√£o R√°pida dos Dados Estruturados</span>
                    <button class="copy-button" onclick="copyCode(this)">Copiar</button>
                </div>
<pre><code><span class="syntax-comment"># Recriar dados estruturados rapidamente (baseado na aula anterior)</span>
<span class="syntax-function">print</span>(<span class="syntax-string">"üìÑ Recriando dados estruturados do e-commerce..."</span>)

<span class="syntax-comment"># Simular dados de vendas (popula√ß√£o completa)</span>
n_total = <span class="syntax-number">50000</span>  <span class="syntax-comment"># Popula√ß√£o maior para demonstrar amostragem</span>

<span class="syntax-comment"># Gerar popula√ß√£o de transa√ß√µes</span>
np.random.seed(<span class="syntax-number">42</span>)
dados_populacao = {
    <span class="syntax-string">'transaction_id'</span>: [<span class="syntax-string">f'TXN{i+1:06d}'</span> <span class="syntax-keyword">for</span> i <span class="syntax-keyword">in</span> <span class="syntax-function">range</span>(n_total)],
    <span class="syntax-string">'customer_id'</span>: np.random.randint(<span class="syntax-number">1</span>, <span class="syntax-number">5001</span>, n_total),
    <span class="syntax-string">'product_category'</span>: np.random.choice([<span class="syntax-string">'Eletr√¥nicos'</span>, <span class="syntax-string">'Roupas'</span>, <span class="syntax-string">'Casa'</span>, <span class="syntax-string">'Livros'</span>, <span class="syntax-string">'Esportes'</span>], 
                                        size=n_total, p=[<span class="syntax-number">0.3</span>, <span class="syntax-number">0.25</span>, <span class="syntax-number">0.2</span>, <span class="syntax-number">0.15</span>, <span class="syntax-number">0.1</span>]),
    <span class="syntax-string">'quantity'</span>: np.random.randint(<span class="syntax-number">1</span>, <span class="syntax-number">6</span>, n_total),
    <span class="syntax-string">'unit_price'</span>: np.random.lognormal(mean=<span class="syntax-number">4</span>, sigma=<span class="syntax-number">0.8</span>, size=n_total),  <span class="syntax-comment"># Distribui√ß√£o log-normal</span>
    <span class="syntax-string">'customer_age'</span>: np.random.normal(loc=<span class="syntax-number">35</span>, scale=<span class="syntax-number">12</span>, size=n_total),  <span class="syntax-comment"># Distribui√ß√£o normal</span>
    <span class="syntax-string">'region'</span>: np.random.choice([<span class="syntax-string">'Norte'</span>, <span class="syntax-string">'Nordeste'</span>, <span class="syntax-string">'Centro-Oeste'</span>, <span class="syntax-string">'Sudeste'</span>, <span class="syntax-string">'Sul'</span>], 
                                size=n_total, p=[<span class="syntax-number">0.1</span>, <span class="syntax-number">0.2</span>, <span class="syntax-number">0.15</span>, <span class="syntax-number">0.35</span>, <span class="syntax-number">0.2</span>]),
    <span class="syntax-string">'day_of_week'</span>: np.random.choice(<span class="syntax-function">range</span>(<span class="syntax-number">1</span>, <span class="syntax-number">8</span>), n_total),  <span class="syntax-comment"># 1=segunda, 7=domingo</span>
    <span class="syntax-string">'is_weekend'</span>: np.random.choice([<span class="syntax-number">0</span>, <span class="syntax-number">1</span>], size=n_total, p=[<span class="syntax-number">0.71</span>, <span class="syntax-number">0.29</span>])  <span class="syntax-comment"># 5/7 dias √∫teis</span>
}

<span class="syntax-comment"># Calcular campos derivados</span>
dados_populacao[<span class="syntax-string">'total_amount'</span>] = dados_populacao[<span class="syntax-string">'quantity'</span>] * dados_populacao[<span class="syntax-string">'unit_price'</span>]

<span class="syntax-comment"># Criar DataFrame da popula√ß√£o</span>
df_populacao = pd.DataFrame(dados_populacao)

<span class="syntax-comment"># Limpar valores extremos (simular limpeza de dados)</span>
df_populacao = df_populacao[
    (df_populacao[<span class="syntax-string">'customer_age'</span>] >= <span class="syntax-number">18</span>) & 
    (df_populacao[<span class="syntax-string">'customer_age'</span>] <= <span class="syntax-number">80</span>) &
    (df_populacao[<span class="syntax-string">'unit_price'</span>] <= <span class="syntax-number">1000</span>)
].reset_index(drop=<span class="syntax-keyword">True</span>)

<span class="syntax-function">print</span>(<span class="syntax-string">f"‚úÖ Popula√ß√£o criada: {len(df_populacao):,} transa√ß√µes"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"üí∞ Revenue total: R$ {df_populacao['total_amount'].sum():,.2f}"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"üõí Ticket m√©dio: R$ {df_populacao['total_amount'].mean():.2f}"</span>)

<span class="syntax-function">print</span>(<span class="syntax-string">"\nüìä Primeiros registros da popula√ß√£o:"</span>)
<span class="syntax-function">print</span>(df_populacao.head())</code></pre>
            </div>

            <div class="explanation-box">
                <h5>üîç Popula√ß√£o de Dados:</h5>
                <p><strong>50.000 transa√ß√µes:</strong> Popula√ß√£o completa para demonstrar amostragem | <strong>Distribui√ß√µes Realistas:</strong> Pre√ßos seguem log-normal (t√≠pico de valores monet√°rios), idades seguem normal | <strong>Limpeza:</strong> Removemos outliers extremos como na pr√°tica real</p>
            </div>
        </div>

        <!-- Passo 2: T√©cnicas de Amostragem -->
        <div class="step-container">
            <div class="step-header">
                <div class="step-number">2</div>
                <h2 class="step-title">Implementa√ß√£o de T√©cnicas de Amostragem</h2>
            </div>
            <div class="stats-badge">üé≤ Amostragem Pr√°tica</div>
            <p class="step-description">Agora vamos implementar os quatro tipos principais de amostragem discutidos na aula te√≥rica. Cada t√©cnica tem suas vantagens e aplica√ß√µes espec√≠ficas em Data Science.</p>
            
            <div class="theory-box">
                <h4>üéØ Compara√ß√£o de M√©todos de Amostragem</h4>
                <p>Implementaremos amostragem aleat√≥ria simples, estratificada, sistem√°tica e por conglomerados. Cada m√©todo produz amostras diferentes, e veremos como isso afeta as estimativas estat√≠sticas obtidas.</p>
            </div>
            
            <div class="code-block">
                <div class="code-header">
                    <span>üé≤ Amostragem Aleat√≥ria Simples</span>
                    <button class="copy-button" onclick="copyCode(this)">Copiar</button>
                </div>
<pre><code><span class="syntax-function">print</span>(<span class="syntax-string">"\n" + "="*60</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">"üé≤ T√âCNICAS DE AMOSTRAGEM"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">"="*60</span>)

<span class="syntax-comment"># Definir tamanho da amostra</span>
tamanho_amostra = <span class="syntax-number">1000</span>  <span class="syntax-comment"># 2% da popula√ß√£o</span>

<span class="syntax-function">print</span>(<span class="syntax-string">f"\nüéØ Tamanho da amostra: {tamanho_amostra:,} ({tamanho_amostra/len(df_populacao)*100:.1f}% da popula√ß√£o)"</span>)

<span class="syntax-comment"># 1. AMOSTRAGEM ALEAT√ìRIA SIMPLES</span>
<span class="syntax-function">print</span>(<span class="syntax-string">"\n1Ô∏è‚É£ AMOSTRAGEM ALEAT√ìRIA SIMPLES"</span>)

np.random.seed(<span class="syntax-number">42</span>)
amostra_aleatoria = df_populacao.sample(n=tamanho_amostra, random_state=<span class="syntax-number">42</span>)

<span class="syntax-comment"># Estat√≠sticas da amostra aleat√≥ria</span>
ticket_medio_pop = df_populacao[<span class="syntax-string">'total_amount'</span>].mean()
ticket_medio_amostra = amostra_aleatoria[<span class="syntax-string">'total_amount'</span>].mean()

<span class="syntax-function">print</span>(<span class="syntax-string">f"   üí∞ Ticket m√©dio popula√ß√£o: R$ {ticket_medio_pop:.2f}"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"   üí∞ Ticket m√©dio amostra:   R$ {ticket_medio_amostra:.2f}"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"   üìä Erro amostral: R$ {abs(ticket_medio_pop - ticket_medio_amostra):.2f} ({abs(ticket_medio_pop - ticket_medio_amostra)/ticket_medio_pop*100:.2f}%)"</span>)

<span class="syntax-comment"># Distribui√ß√£o por categoria na amostra vs popula√ß√£o</span>
dist_pop = df_populacao[<span class="syntax-string">'product_category'</span>].value_counts(normalize=<span class="syntax-keyword">True</span>).sort_index()
dist_amostra = amostra_aleatoria[<span class="syntax-string">'product_category'</span>].value_counts(normalize=<span class="syntax-keyword">True</span>).sort_index()

<span class="syntax-function">print</span>(<span class="syntax-string">f"\n   üì¶ Distribui√ß√£o por categoria:"</span>)
<span class="syntax-keyword">for</span> categoria <span class="syntax-keyword">in</span> dist_pop.index:
    pop_pct = dist_pop[categoria] * <span class="syntax-number">100</span>
    amostra_pct = dist_amostra.get(categoria, <span class="syntax-number">0</span>) * <span class="syntax-number">100</span>
    <span class="syntax-function">print</span>(<span class="syntax-string">f"      {categoria}: Popula√ß√£o {pop_pct:.1f}% | Amostra {amostra_pct:.1f}%"</span>)</code></pre>
            </div>

            <div class="explanation-box">
                <h5>üîç Amostragem Aleat√≥ria Simples:</h5>
                <p><strong>Princ√≠pio:</strong> Cada elemento tem igual probabilidade de sele√ß√£o | <strong>Vantagem:</strong> Sem vi√©s de sele√ß√£o | <strong>Observa√ß√£o:</strong> Note como algumas categorias podem ficar sub/sobre-representadas por acaso</p>
            </div>

            <div class="code-block">
                <div class="code-header">
                    <span>üìä Amostragem Estratificada</span>
                    <button class="copy-button" onclick="copyCode(this)">Copiar</button>
                </div>
<pre><code><span class="syntax-comment"># 2. AMOSTRAGEM ESTRATIFICADA</span>
<span class="syntax-function">print</span>(<span class="syntax-string">"\n2Ô∏è‚É£ AMOSTRAGEM ESTRATIFICADA (por regi√£o)"</span>)

<span class="syntax-comment"># Calcular propor√ß√£o de cada regi√£o</span>
proporcoes_regiao = df_populacao[<span class="syntax-string">'region'</span>].value_counts(normalize=<span class="syntax-keyword">True</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">"   üó∫Ô∏è Propor√ß√µes por regi√£o na popula√ß√£o:"</span>)
<span class="syntax-keyword">for</span> regiao, prop <span class="syntax-keyword">in</span> proporcoes_regiao.items():
    <span class="syntax-function">print</span>(<span class="syntax-string">f"      {regiao}: {prop*100:.1f}%"</span>)

<span class="syntax-comment"># Amostragem estratificada mantendo propor√ß√µes</span>
amostras_estratos = []
<span class="syntax-keyword">for</span> regiao <span class="syntax-keyword">in</span> proporcoes_regiao.index:
    n_estrato = <span class="syntax-function">int</span>(tamanho_amostra * proporcoes_regiao[regiao])
    dados_estrato = df_populacao[df_populacao[<span class="syntax-string">'region'</span>] == regiao]
    amostra_estrato = dados_estrato.sample(n=n_estrato, random_state=<span class="syntax-number">42</span>)
    amostras_estratos.append(amostra_estrato)

amostra_estratificada = pd.concat(amostras_estratos, ignore_index=<span class="syntax-keyword">True</span>)

<span class="syntax-comment"># Verificar se manteve as propor√ß√µes</span>
prop_estratificada = amostra_estratificada[<span class="syntax-string">'region'</span>].value_counts(normalize=<span class="syntax-keyword">True</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"\n   ‚úÖ Propor√ß√µes mantidas na amostra estratificada:"</span>)
<span class="syntax-keyword">for</span> regiao <span class="syntax-keyword">in</span> proporcoes_regiao.index:
    pop_pct = proporcoes_regiao[regiao] * <span class="syntax-number">100</span>
    estratif_pct = prop_estratificada.get(regiao, <span class="syntax-number">0</span>) * <span class="syntax-number">100</span>
    <span class="syntax-function">print</span>(<span class="syntax-string">f"      {regiao}: Popula√ß√£o {pop_pct:.1f}% | Estratificada {estratif_pct:.1f}%"</span>)

ticket_medio_estratificada = amostra_estratificada[<span class="syntax-string">'total_amount'</span>].mean()
<span class="syntax-function">print</span>(<span class="syntax-string">f"\n   üí∞ Ticket m√©dio estratificada: R$ {ticket_medio_estratificada:.2f}"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"   üìä Erro amostral: R$ {abs(ticket_medio_pop - ticket_medio_estratificada):.2f} ({abs(ticket_medio_pop - ticket_medio_estratificada)/ticket_medio_pop*100:.2f}%)"</span>)</code></pre>
            </div>

            <div class="explanation-box">
                <h5>üîç Amostragem Estratificada:</h5>
                <p><strong>Princ√≠pio:</strong> Divide popula√ß√£o em estratos e amostra proporcionalmente | <strong>Vantagem:</strong> Garante representa√ß√£o de todos os subgrupos | <strong>Resultado:</strong> Geralmente produz estimativas mais precisas</p>
            </div>

            <div class="code-block">
                <div class="code-header">
                    <span>‚öôÔ∏è Amostragem Sistem√°tica e por Conglomerados</span>
                    <button class="copy-button" onclick="copyCode(this)">Copiar</button>
                </div>
<pre><code><span class="syntax-comment"># 3. AMOSTRAGEM SISTEM√ÅTICA</span>
<span class="syntax-function">print</span>(<span class="syntax-string">"\n3Ô∏è‚É£ AMOSTRAGEM SISTEM√ÅTICA"</span>)

<span class="syntax-comment"># Calcular intervalo k</span>
k = <span class="syntax-function">len</span>(df_populacao) // tamanho_amostra
<span class="syntax-function">print</span>(<span class="syntax-string">f"   üìê Intervalo k = {k} (cada {k}¬∫ elemento)"</span>)

<span class="syntax-comment"># Sortear ponto de partida aleat√≥rio</span>
np.random.seed(<span class="syntax-number">42</span>)
inicio = np.random.randint(<span class="syntax-number">0</span>, k)

<span class="syntax-comment"># Selecionar elementos sistematicamente</span>
indices_sistematicos = <span class="syntax-function">list</span>(<span class="syntax-function">range</span>(inicio, <span class="syntax-function">len</span>(df_populacao), k))[:tamanho_amostra]
amostra_sistematica = df_populacao.iloc[indices_sistematicos]

ticket_medio_sistematica = amostra_sistematica[<span class="syntax-string">'total_amount'</span>].mean()
<span class="syntax-function">print</span>(<span class="syntax-string">f"   üí∞ Ticket m√©dio sistem√°tica: R$ {ticket_medio_sistematica:.2f}"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"   üìä Erro amostral: R$ {abs(ticket_medio_pop - ticket_medio_sistematica):.2f} ({abs(ticket_medio_pop - ticket_medio_sistematica)/ticket_medio_pop*100:.2f}%)"</span>)

<span class="syntax-comment"># 4. AMOSTRAGEM POR CONGLOMERADOS</span>
<span class="syntax-function">print</span>(<span class="syntax-string">"\n4Ô∏è‚É£ AMOSTRAGEM POR CONGLOMERADOS (por regi√£o)"</span>)

<span class="syntax-comment"># Selecionar 3 regi√µes aleatoriamente como conglomerados</span>
np.random.seed(<span class="syntax-number">42</span>)
regioes_selecionadas = np.random.choice(df_populacao[<span class="syntax-string">'region'</span>].unique(), size=<span class="syntax-number">3</span>, replace=<span class="syntax-keyword">False</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"   üéØ Regi√µes selecionadas: {', '.join(regioes_selecionadas)}"</span>)

<span class="syntax-comment"># Amostrar dentro dos conglomerados selecionados</span>
dados_conglomerados = df_populacao[df_populacao[<span class="syntax-string">'region'</span>].isin(regioes_selecionadas)]
amostra_conglomerados = dados_conglomerados.sample(n=tamanho_amostra, random_state=<span class="syntax-number">42</span>)

ticket_medio_conglomerados = amostra_conglomerados[<span class="syntax-string">'total_amount'</span>].mean()
<span class="syntax-function">print</span>(<span class="syntax-string">f"   üí∞ Ticket m√©dio conglomerados: R$ {ticket_medio_conglomerados:.2f}"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"   üìä Erro amostral: R$ {abs(ticket_medio_pop - ticket_medio_conglomerados):.2f} ({abs(ticket_medio_pop - ticket_medio_conglomerados)/ticket_medio_pop*100:.2f}%)"</span>)

<span class="syntax-comment"># Resumo comparativo</span>
<span class="syntax-function">print</span>(<span class="syntax-string">f"\nüìä RESUMO COMPARATIVO DOS M√âTODOS:"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"{'M√©todo':<20} {'Ticket M√©dio':<15} {'Erro Abs.':<12} {'Erro %':<10}"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">"-"*60</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"{'Popula√ß√£o':<20} R$ {ticket_medio_pop:<11.2f} {'-':<12} {'-':<10}"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"{'Aleat√≥ria':<20} R$ {ticket_medio_amostra:<11.2f} R$ {abs(ticket_medio_pop - ticket_medio_amostra):<8.2f} {abs(ticket_medio_pop - ticket_medio_amostra)/ticket_medio_pop*100:<6.2f}%"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"{'Estratificada':<20} R$ {ticket_medio_estratificada:<11.2f} R$ {abs(ticket_medio_pop - ticket_medio_estratificada):<8.2f} {abs(ticket_medio_pop - ticket_medio_estratificada)/ticket_medio_pop*100:<6.2f}%"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"{'Sistem√°tica':<20} R$ {ticket_medio_sistematica:<11.2f} R$ {abs(ticket_medio_pop - ticket_medio_sistematica):<8.2f} {abs(ticket_medio_pop - ticket_medio_sistematica)/ticket_medio_pop*100:<6.2f}%"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"{'Conglomerados':<20} R$ {ticket_medio_conglomerados:<11.2f} R$ {abs(ticket_medio_pop - ticket_medio_conglomerados):<8.2f} {abs(ticket_medio_pop - ticket_medio_conglomerados)/ticket_medio_pop*100:<6.2f}%"</span>)</code></pre>
            </div>

            <div class="explanation-box">
                <h5>üîç Compara√ß√£o dos M√©todos:</h5>
                <p><strong>Sistem√°tica:</strong> Intervalos regulares, risco de vi√©s se h√° padr√µes | <strong>Conglomerados:</strong> Seleciona grupos inteiros, menos precisa mas mais pr√°tica | <strong>Observe:</strong> Cada m√©todo produz estimativas ligeiramente diferentes - isso √© normal!</p>
            </div>
        </div>

        <!-- Passo 3: An√°lise de Distribui√ß√µes -->
        <div class="step-container">
            <div class="step-header">
                <div class="step-number">3</div>
                <h2 class="step-title">An√°lise de Distribui√ß√µes de Dados</h2>
            </div>
            <div class="stats-badge">üìà Distribui√ß√µes</div>
            <p class="step-description">Agora vamos analisar as distribui√ß√µes dos dados, identificando padr√µes como normalidade, assimetria e outliers. Esta an√°lise √© fundamental para escolher m√©todos estat√≠sticos apropriados.</p>
            
            <div class="theory-box">
                <h4>üìä Tipos de Distribui√ß√µes nos Dados</h4>
                <p>Identificaremos diferentes tipos de distribui√ß√µes nos nossos dados: normal (idade), log-normal (pre√ßos), uniforme (categorias) e poisson (eventos raros). Cada distribui√ß√£o tem caracter√≠sticas espec√≠ficas que afetam as an√°lises.</p>
            </div>
            
            <div class="code-block">
                <div class="code-header">
                    <span>üìà An√°lise Explorat√≥ria de Distribui√ß√µes</span>
                    <button class="copy-button" onclick="copyCode(this)">Copiar</button>
                </div>
<pre><code><span class="syntax-function">print</span>(<span class="syntax-string">"\n" + "="*60</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">"üìà AN√ÅLISE DE DISTRIBUI√á√ïES"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">"="*60</span>)

<span class="syntax-comment"># Trabalhar com a amostra estratificada (mais representativa)</span>
dados_analise = amostra_estratificada.copy()

<span class="syntax-comment"># 1. AN√ÅLISE DA DISTRIBUI√á√ÉO DE IDADES</span>
<span class="syntax-function">print</span>(<span class="syntax-string">"\n1Ô∏è‚É£ DISTRIBUI√á√ÉO DE IDADES DOS CLIENTES"</span>)

idades = dados_analise[<span class="syntax-string">'customer_age'</span>]

<span class="syntax-comment"># Estat√≠sticas descritivas</span>
<span class="syntax-function">print</span>(<span class="syntax-string">f"   üìä Estat√≠sticas descritivas:"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"      M√©dia: {idades.mean():.1f} anos"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"      Mediana: {idades.median():.1f} anos"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"      Moda: {idades.mode()[0]:.1f} anos"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"      Desvio padr√£o: {idades.std():.1f} anos"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"      Assimetria: {idades.skew():.3f}"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"      Curtose: {idades.kurtosis():.3f}"</span>)

<span class="syntax-comment"># Teste de normalidade (Shapiro-Wilk para amostras pequenas)</span>
<span class="syntax-keyword">if</span> <span class="syntax-function">len</span>(idades) <= <span class="syntax-number">5000</span>:
    stat_shapiro, p_value_shapiro = stats.shapiro(idades)
    <span class="syntax-function">print</span>(<span class="syntax-string">f"      Teste Shapiro-Wilk: p-value = {p_value_shapiro:.6f}"</span>)
    <span class="syntax-keyword">if</span> p_value_shapiro > <span class="syntax-number">0.05</span>:
        <span class="syntax-function">print</span>(<span class="syntax-string">f"      ‚úÖ Distribui√ß√£o normal (p > 0.05)"</span>)
    <span class="syntax-keyword">else</span>:
        <span class="syntax-function">print</span>(<span class="syntax-string">f"      ‚ùå Distribui√ß√£o n√£o normal (p ‚â§ 0.05)"</span>)

<span class="syntax-comment"># 2. AN√ÅLISE DA DISTRIBUI√á√ÉO DE PRE√áOS</span>
<span class="syntax-function">print</span>(<span class="syntax-string">"\n2Ô∏è‚É£ DISTRIBUI√á√ÉO DE PRE√áOS UNIT√ÅRIOS"</span>)

precos = dados_analise[<span class="syntax-string">'unit_price'</span>]

<span class="syntax-function">print</span>(<span class="syntax-string">f"   üìä Estat√≠sticas descritivas:"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"      M√©dia: R$ {precos.mean():.2f}"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"      Mediana: R$ {precos.median():.2f}"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"      Desvio padr√£o: R$ {precos.std():.2f}"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"      Assimetria: {precos.skew():.3f}"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"      Curtose: {precos.kurtosis():.3f}"</span>)

<span class="syntax-comment"># An√°lise de assimetria</span>
<span class="syntax-keyword">if</span> precos.skew() > <span class="syntax-number">1</span>:
    <span class="syntax-function">print</span>(<span class="syntax-string">f"      üìà Fortemente assim√©trica √† direita"</span>)
<span class="syntax-keyword">elif</span> precos.skew() > <span class="syntax-number">0.5</span>:
    <span class="syntax-function">print</span>(<span class="syntax-string">f"      üìà Moderadamente assim√©trica √† direita"</span>)
<span class="syntax-keyword">elif</span> precos.skew() < -<span class="syntax-number">0.5</span>:
    <span class="syntax-function">print</span>(<span class="syntax-string">f"      üìâ Assim√©trica √† esquerda"</span>)
<span class="syntax-keyword">else</span>:
    <span class="syntax-function">print</span>(<span class="syntax-string">f"      ‚öñÔ∏è Aproximadamente sim√©trica"</span>)

<span class="syntax-comment"># Transforma√ß√£o logar√≠tmica para normalizar</span>
precos_log = np.log(precos)
<span class="syntax-function">print</span>(<span class="syntax-string">f"      üîÑ Ap√≥s transforma√ß√£o log:"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"         Assimetria: {precos_log.skew():.3f}"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"         Curtose: {precos_log.kurtosis():.3f}"</span>)</code></pre>
            </div>

            <div class="explanation-box">
                <h5>üîç An√°lise de Distribui√ß√µes:</h5>
                <p><strong>Idades:</strong> Esperamos distribui√ß√£o aproximadamente normal | <strong>Pre√ßos:</strong> T√≠pica distribui√ß√£o log-normal (assim√©trica √† direita) | <strong>Transforma√ß√£o Log:</strong> Pode normalizar distribui√ß√µes assim√©tricas | <strong>Testes:</strong> Shapiro-Wilk para verificar normalidade</p>
            </div>

            <div class="code-block">
                <div class="code-header">
                    <span>üìä Visualiza√ß√£o das Distribui√ß√µes</span>
                    <button class="copy-button" onclick="copyCode(this)">Copiar</button>
                </div>
<pre><code><span class="syntax-comment"># Criar visualiza√ß√µes das distribui√ß√µes</span>
fig, axes = plt.subplots(<span class="syntax-number">2</span>, <span class="syntax-number">3</span>, figsize=(<span class="syntax-number">15</span>, <span class="syntax-number">10</span>))
fig.suptitle(<span class="syntax-string">'An√°lise de Distribui√ß√µes dos Dados'</span>, fontsize=<span class="syntax-number">16</span>, fontweight=<span class="syntax-string">'bold'</span>)

<span class="syntax-comment"># 1. Histograma de idades</span>
axes[<span class="syntax-number">0</span>, <span class="syntax-number">0</span>].hist(idades, bins=<span class="syntax-number">30</span>, alpha=<span class="syntax-number">0.7</span>, color=<span class="syntax-string">'skyblue'</span>, edgecolor=<span class="syntax-string">'black'</span>)
axes[<span class="syntax-number">0</span>, <span class="syntax-number">0</span>].axvline(idades.mean(), color=<span class="syntax-string">'red'</span>, linestyle=<span class="syntax-string">'--'</span>, label=<span class="syntax-string">f'M√©dia: {idades.mean():.1f}'</span>)
axes[<span class="syntax-number">0</span>, <span class="syntax-number">0</span>].set_title(<span class="syntax-string">'Distribui√ß√£o de Idades'</span>)
axes[<span class="syntax-number">0</span>, <span class="syntax-number">0</span>].set_xlabel(<span class="syntax-string">'Idade (anos)'</span>)
axes[<span class="syntax-number">0</span>, <span class="syntax-number">0</span>].set_ylabel(<span class="syntax-string">'Frequ√™ncia'</span>)
axes[<span class="syntax-number">0</span>, <span class="syntax-number">0</span>].legend()

<span class="syntax-comment"># 2. Q-Q plot para idades (verificar normalidade)</span>
stats.probplot(idades, dist=<span class="syntax-string">"norm"</span>, plot=axes[<span class="syntax-number">0</span>, <span class="syntax-number">1</span>])
axes[<span class="syntax-number">0</span>, <span class="syntax-number">1</span>].set_title(<span class="syntax-string">'Q-Q Plot - Idades vs Normal'</span>)
axes[<span class="syntax-number">0</span>, <span class="syntax-number">1</span>].grid(<span class="syntax-keyword">True</span>, alpha=<span class="syntax-number">0.3</span>)

<span class="syntax-comment"># 3. Histograma de pre√ßos (original)</span>
axes[<span class="syntax-number">0</span>, <span class="syntax-number">2</span>].hist(precos, bins=<span class="syntax-number">50</span>, alpha=<span class="syntax-number">0.7</span>, color=<span class="syntax-string">'lightcoral'</span>, edgecolor=<span class="syntax-string">'black'</span>)
axes[<span class="syntax-number">0</span>, <span class="syntax-number">2</span>].axvline(precos.mean(), color=<span class="syntax-string">'red'</span>, linestyle=<span class="syntax-string">'--'</span>, label=<span class="syntax-string">f'M√©dia: R${precos.mean():.0f}'</span>)
axes[<span class="syntax-number">0</span>, <span class="syntax-number">2</span>].axvline(precos.median(), color=<span class="syntax-string">'blue'</span>, linestyle=<span class="syntax-string">'--'</span>, label=<span class="syntax-string">f'Mediana: R${precos.median():.0f}'</span>)
axes[<span class="syntax-number">0</span>, <span class="syntax-number">2</span>].set_title(<span class="syntax-string">'Distribui√ß√£o de Pre√ßos (Original)'</span>)
axes[<span class="syntax-number">0</span>, <span class="syntax-number">2</span>].set_xlabel(<span class="syntax-string">'Pre√ßo (R$)'</span>)
axes[<span class="syntax-number">0</span>, <span class="syntax-number">2</span>].set_ylabel(<span class="syntax-string">'Frequ√™ncia'</span>)
axes[<span class="syntax-number">0</span>, <span class="syntax-number">2</span>].legend()

<span class="syntax-comment"># 4. Histograma de pre√ßos (log-transformado)</span>
axes[<span class="syntax-number">1</span>, <span class="syntax-number">0</span>].hist(precos_log, bins=<span class="syntax-number">30</span>, alpha=<span class="syntax-number">0.7</span>, color=<span class="syntax-string">'lightgreen'</span>, edgecolor=<span class="syntax-string">'black'</span>)
axes[<span class="syntax-number">1</span>, <span class="syntax-number">0</span>].axvline(precos_log.mean(), color=<span class="syntax-string">'red'</span>, linestyle=<span class="syntax-string">'--'</span>, label=<span class="syntax-string">f'M√©dia: {precos_log.mean():.2f}'</span>)
axes[<span class="syntax-number">1</span>, <span class="syntax-number">0</span>].set_title(<span class="syntax-string">'Distribui√ß√£o de Log(Pre√ßos)'</span>)
axes[<span class="syntax-number">1</span>, <span class="syntax-number">0</span>].set_xlabel(<span class="syntax-string">'Log(Pre√ßo)'</span>)
axes[<span class="syntax-number">1</span>, <span class="syntax-number">0</span>].set_ylabel(<span class="syntax-string">'Frequ√™ncia'</span>)
axes[<span class="syntax-number">1</span>, <span class="syntax-number">0</span>].legend()

<span class="syntax-comment"># 5. Boxplot de pre√ßos por categoria</span>
dados_analise.boxplot(column=<span class="syntax-string">'unit_price'</span>, by=<span class="syntax-string">'product_category'</span>, ax=axes[<span class="syntax-number">1</span>, <span class="syntax-number">1</span>])
axes[<span class="syntax-number">1</span>, <span class="syntax-number">1</span>].set_title(<span class="syntax-string">'Distribui√ß√£o de Pre√ßos por Categoria'</span>)
axes[<span class="syntax-number">1</span>, <span class="syntax-number">1</span>].set_xlabel(<span class="syntax-string">'Categoria'</span>)
axes[<span class="syntax-number">1</span>, <span class="syntax-number">1</span>].set_ylabel(<span class="syntax-string">'Pre√ßo (R$)'</span>)
axes[<span class="syntax-number">1</span>, <span class="syntax-number">1</span>].tick_params(axis=<span class="syntax-string">'x'</span>, rotation=<span class="syntax-number">45</span>)

<span class="syntax-comment"># 6. Distribui√ß√£o do total de vendas por dia da semana</span>
vendas_dia = dados_analise.groupby(<span class="syntax-string">'day_of_week'</span>)[<span class="syntax-string">'total_amount'</span>].<span class="syntax-function">sum</span>()
dias_semana = [<span class="syntax-string">'Seg'</span>, <span class="syntax-string">'Ter'</span>, <span class="syntax-string">'Qua'</span>, <span class="syntax-string">'Qui'</span>, <span class="syntax-string">'Sex'</span>, <span class="syntax-string">'S√°b'</span>, <span class="syntax-string">'Dom'</span>]
axes[<span class="syntax-number">1</span>, <span class="syntax-number">2</span>].bar(<span class="syntax-function">range</span>(<span class="syntax-number">1</span>, <span class="syntax-number">8</span>), vendas_dia.values, color=<span class="syntax-string">'orange'</span>, alpha=<span class="syntax-number">0.7</span>)
axes[<span class="syntax-number">1</span>, <span class="syntax-number">2</span>].set_title(<span class="syntax-string">'Vendas por Dia da Semana'</span>)
axes[<span class="syntax-number">1</span>, <span class="syntax-number">2</span>].set_xlabel(<span class="syntax-string">'Dia da Semana'</span>)
axes[<span class="syntax-number">1</span>, <span class="syntax-number">2</span>].set_ylabel(<span class="syntax-string">'Total de Vendas (R$)'</span>)
axes[<span class="syntax-number">1</span>, <span class="syntax-number">2</span>].set_xticks(<span class="syntax-function">range</span>(<span class="syntax-number">1</span>, <span class="syntax-number">8</span>))
axes[<span class="syntax-number">1</span>, <span class="syntax-number">2</span>].set_xticklabels(dias_semana)

plt.tight_layout()
plt.show()

<span class="syntax-function">print</span>(<span class="syntax-string">"\nüìä Gr√°ficos de distribui√ß√£o criados!"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">"   üîç Observe: Q-Q plot mostra se dados seguem distribui√ß√£o normal"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">"   üìà Pre√ßos: assimetria t√≠pica de dados monet√°rios"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">"   üì¶ Boxplots: identificam outliers e diferen√ßas entre categorias"</span>)</code></pre>
            </div>

            <div class="explanation-box">
                <h5>üîç Interpreta√ß√£o das Visualiza√ß√µes:</h5>
                <p><strong>Q-Q Plot:</strong> Pontos pr√≥ximos √† linha diagonal = distribui√ß√£o normal | <strong>Histogramas:</strong> Forma da distribui√ß√£o (sim√©trica, assim√©trica, multimodal) | <strong>Boxplots:</strong> Mediana, quartis e outliers por categoria | <strong>Log-Transforma√ß√£o:</strong> Normaliza distribui√ß√µes assim√©tricas</p>
            </div>
        </div>

        <!-- Passo 4: Teorema Central do Limite -->
        <div class="step-container">
            <div class="step-header">
                <div class="step-number">4</div>
                <h2 class="step-title">Demonstra√ß√£o do Teorema Central do Limite</h2>
            </div>
            <div class="stats-badge">üìä TCL na Pr√°tica</div>
            <p class="step-description">Vamos demonstrar na pr√°tica o <strong>Teorema Central do Limite</strong>, um dos conceitos mais importantes da estat√≠stica. Mesmo com dados n√£o-normais, as m√©dias amostrais tendem √† normalidade.</p>
            
            <div class="theory-box">
                <h4>üéØ Teorema Central do Limite</h4>
                <p>Independente da distribui√ß√£o original dos dados, a distribui√ß√£o das m√©dias amostrais aproxima-se de uma distribui√ß√£o normal √† medida que o tamanho da amostra aumenta (n ‚â• 30). Este √© o fundamento de muitos testes estat√≠sticos.</p>
            </div>
            
            <div class="code-block">
                <div class="code-header">
                    <span>üß™ Simula√ß√£o do Teorema Central do Limite</span>
                    <button class="copy-button" onclick="copyCode(this)">Copiar</button>
                </div>
<pre><code><span class="syntax-function">print</span>(<span class="syntax-string">"\n" + "="*60</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">"üß™ DEMONSTRA√á√ÉO DO TEOREMA CENTRAL DO LIMITE"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">"="*60</span>)

<span class="syntax-comment"># Usar os pre√ßos (distribui√ß√£o n√£o-normal) para demonstrar o TCL</span>
populacao_precos = df_populacao[<span class="syntax-string">'unit_price'</span>].values

<span class="syntax-function">print</span>(<span class="syntax-string">f"üìä Popula√ß√£o original:"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"   Tamanho: {len(populacao_precos):,}"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"   M√©dia: R$ {populacao_precos.mean():.2f}"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"   Desvio padr√£o: R$ {populacao_precos.std():.2f}"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"   Assimetria: {stats.skew(populacao_precos):.3f}"</span>)

<span class="syntax-comment"># Simula√ß√£o com diferentes tamanhos de amostra</span>
tamanhos_amostra = [<span class="syntax-number">5</span>, <span class="syntax-number">10</span>, <span class="syntax-number">30</span>, <span class="syntax-number">100</span>]
num_amostras = <span class="syntax-number">1000</span>  <span class="syntax-comment"># N√∫mero de amostras para cada tamanho</span>

<span class="syntax-function">print</span>(<span class="syntax-string">f"\nüîÑ Simulando {num_amostras} amostras para cada tamanho..."</span>)

medias_amostrais = {}

<span class="syntax-keyword">for</span> n <span class="syntax-keyword">in</span> tamanhos_amostra:
    <span class="syntax-function">print</span>(<span class="syntax-string">f"\nüîç Tamanho da amostra: {n}"</span>)
    
    <span class="syntax-comment"># Gerar m√∫ltiplas amostras e calcular suas m√©dias</span>
    medias = []
    <span class="syntax-keyword">for</span> i <span class="syntax-keyword">in</span> <span class="syntax-function">range</span>(num_amostras):
        amostra = np.random.choice(populacao_precos, size=n, replace=<span class="syntax-keyword">False</span>)
        medias.append(amostra.mean())
    
    medias = np.array(medias)
    medias_amostrais[n] = medias
    
    <span class="syntax-comment"># Estat√≠sticas das m√©dias amostrais</span>
    <span class="syntax-function">print</span>(<span class="syntax-string">f"   M√©dia das m√©dias: R$ {medias.mean():.2f}"</span>)
    <span class="syntax-function">print</span>(<span class="syntax-string">f"   Desvio padr√£o das m√©dias: R$ {medias.std():.2f}"</span>)
    <span class="syntax-function">print</span>(<span class="syntax-string">f"   Erro padr√£o te√≥rico: R$ {populacao_precos.std()/np.sqrt(n):.2f}"</span>)
    <span class="syntax-function">print</span>(<span class="syntax-string">f"   Assimetria das m√©dias: {stats.skew(medias):.3f}"</span>)
    
    <span class="syntax-comment"># Teste de normalidade</span>
    _, p_value = stats.shapiro(medias[:<span class="syntax-number">5000</span>])  <span class="syntax-comment"># Limite do Shapiro-Wilk</span>
    <span class="syntax-function">print</span>(<span class="syntax-string">f"   Teste normalidade (p-value): {p_value:.6f}"</span>)
    
    <span class="syntax-keyword">if</span> p_value > <span class="syntax-number">0.05</span>:
        <span class="syntax-function">print</span>(<span class="syntax-string">f"   ‚úÖ M√©dias seguem distribui√ß√£o normal"</span>)
    <span class="syntax-keyword">else</span>:
        <span class="syntax-function">print</span>(<span class="syntax-string">f"   ‚ö†Ô∏è M√©dias ainda n√£o s√£o perfeitamente normais"</span>)</code></pre>
            </div>

            <div class="explanation-box">
                <h5>üîç Observa√ß√µes do TCL:</h5>
                <p><strong>M√©dia das M√©dias:</strong> Converge para a m√©dia populacional | <strong>Erro Padr√£o:</strong> œÉ/‚àön - diminui com amostra maior | <strong>Assimetria:</strong> Diminui conforme n aumenta | <strong>Normalidade:</strong> Melhora com amostras maiores (n ‚â• 30)</p>
            </div>

            <div class="code-block">
                <div class="code-header">
                    <span>üìä Visualiza√ß√£o do Teorema Central do Limite</span>
                    <button class="copy-button" onclick="copyCode(this)">Copiar</button>
                </div>
<pre><code><span class="syntax-comment"># Visualizar o Teorema Central do Limite</span>
fig, axes = plt.subplots(<span class="syntax-number">2</span>, <span class="syntax-number">3</span>, figsize=(<span class="syntax-number">15</span>, <span class="syntax-number">10</span>))
fig.suptitle(<span class="syntax-string">'Demonstra√ß√£o do Teorema Central do Limite'</span>, fontsize=<span class="syntax-number">16</span>, fontweight=<span class="syntax-string">'bold'</span>)

<span class="syntax-comment"># Popula√ß√£o original (subplot 0,0)</span>
axes[<span class="syntax-number">0</span>, <span class="syntax-number">0</span>].hist(populacao_precos, bins=<span class="syntax-number">50</span>, alpha=<span class="syntax-number">0.7</span>, color=<span class="syntax-string">'red'</span>, density=<span class="syntax-keyword">True</span>)
axes[<span class="syntax-number">0</span>, <span class="syntax-number">0</span>].set_title(<span class="syntax-string">f'Popula√ß√£o Original\\n(Assim√©trica, n={len(populacao_precos):,})'</span>)
axes[<span class="syntax-number">0</span>, <span class="syntax-number">0</span>].set_xlabel(<span class="syntax-string">'Pre√ßo (R$)'</span>)
axes[<span class="syntax-number">0</span>, <span class="syntax-number">0</span>].set_ylabel(<span class="syntax-string">'Densidade'</span>)

<span class="syntax-comment"># Distribui√ß√µes das m√©dias amostrais</span>
cores = [<span class="syntax-string">'orange'</span>, <span class="syntax-string">'yellow'</span>, <span class="syntax-string">'lightgreen'</span>, <span class="syntax-string">'lightblue'</span>]
posicoes = [(<span class="syntax-number">0</span>,<span class="syntax-number">1</span>), (<span class="syntax-number">0</span>,<span class="syntax-number">2</span>), (<span class="syntax-number">1</span>,<span class="syntax-number">0</span>), (<span class="syntax-number">1</span>,<span class="syntax-number">1</span>)]

<span class="syntax-keyword">for</span> i, n <span class="syntax-keyword">in</span> <span class="syntax-function">enumerate</span>(tamanhos_amostra):
    row, col = posicoes[i]
    medias = medias_amostrais[n]
    
    <span class="syntax-comment"># Histograma das m√©dias</span>
    axes[row, col].hist(medias, bins=<span class="syntax-number">30</span>, alpha=<span class="syntax-number">0.7</span>, color=cores[i], density=<span class="syntax-keyword">True</span>, edgecolor=<span class="syntax-string">'black'</span>)
    
    <span class="syntax-comment"># Sobrepor curva normal te√≥rica</span>
    x_normal = np.linspace(medias.min(), medias.max(), <span class="syntax-number">100</span>)
    media_teorica = populacao_precos.mean()
    erro_padrao_teorico = populacao_precos.std() / np.sqrt(n)
    y_normal = stats.norm.pdf(x_normal, media_teorica, erro_padrao_teorico)
    
    axes[row, col].plot(x_normal, y_normal, <span class="syntax-string">'r-'</span>, linewidth=<span class="syntax-number">2</span>, label=<span class="syntax-string">'Normal Te√≥rica'</span>)
    axes[row, col].axvline(medias.mean(), color=<span class="syntax-string">'blue'</span>, linestyle=<span class="syntax-string">'--'</span>, label=<span class="syntax-string">f'M√©dia: R${medias.mean():.0f}'</span>)
    
    axes[row, col].set_title(<span class="syntax-string">f'M√©dias Amostrais (n={n})\\nAssimetria: {stats.skew(medias):.3f}'</span>)
    axes[row, col].set_xlabel(<span class="syntax-string">'M√©dia da Amostra (R$)'</span>)
    axes[row, col].set_ylabel(<span class="syntax-string">'Densidade'</span>)
    axes[row, col].legend(fontsize=<span class="syntax-number">8</span>)
    axes[row, col].grid(<span class="syntax-keyword">True</span>, alpha=<span class="syntax-number">0.3</span>)

<span class="syntax-comment"># Compara√ß√£o da evolu√ß√£o da normalidade</span>
axes[<span class="syntax-number">1</span>, <span class="syntax-number">2</span>].remove()  <span class="syntax-comment"># Remove o √∫ltimo subplot</span>
ax_comparacao = fig.add_subplot(<span class="syntax-number">2</span>, <span class="syntax-number">3</span>, <span class="syntax-number">6</span>)

<span class="syntax-comment"># Gr√°fico da evolu√ß√£o da assimetria</span>
assimetrias = [stats.skew(medias_amostrais[n]) <span class="syntax-keyword">for</span> n <span class="syntax-keyword">in</span> tamanhos_amostra]
ax_comparacao.plot(tamanhos_amostra, assimetrias, <span class="syntax-string">'bo-'</span>, linewidth=<span class="syntax-number">2</span>, markersize=<span class="syntax-number">8</span>)
ax_comparacao.axhline(y=<span class="syntax-number">0</span>, color=<span class="syntax-string">'r'</span>, linestyle=<span class="syntax-string">'--'</span>, label=<span class="syntax-string">'Sim√©trica Perfeita'</span>)
ax_comparacao.set_title(<span class="syntax-string">'Evolu√ß√£o da Assimetria\\n(TCL em A√ß√£o)'</span>)
ax_comparacao.set_xlabel(<span class="syntax-string">'Tamanho da Amostra (n)'</span>)
ax_comparacao.set_ylabel(<span class="syntax-string">'Assimetria'</span>)
ax_comparacao.legend()
ax_comparacao.grid(<span class="syntax-keyword">True</span>, alpha=<span class="syntax-number">0.3</span>)

plt.tight_layout()
plt.show()

<span class="syntax-function">print</span>(<span class="syntax-string">f"\nüéâ Teorema Central do Limite demonstrado!"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"   üìà Observe como as distribui√ß√µes ficam mais sim√©tricas"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"   üéØ A partir de n=30, a normalidade fica evidente"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"   üìä Curva vermelha = distribui√ß√£o normal te√≥rica"</span>)</code></pre>
            </div>

            <div class="explanation-box">
                <h5>üîç Interpreta√ß√£o do TCL:</h5>
                <p><strong>n=5,10:</strong> Distribui√ß√µes ainda assim√©tricas | <strong>n=30:</strong> Aproxima√ß√£o √† normalidade evidente | <strong>n=100:</strong> Quase perfeitamente normal | <strong>Implica√ß√£o:</strong> Podemos usar estat√≠stica param√©trica mesmo com dados n√£o-normais se n ‚â• 30</p>
            </div>
        </div>

        <!-- Passo 5: Prepara√ß√£o para Checkpoint 1 -->
        <div class="step-container">
            <div class="step-header">
                <div class="step-number">5</div>
                <h2 class="step-title">Prepara√ß√£o para o Checkpoint 1</h2>
            </div>
            <div class="stats-badge">üéØ Projeto</div>
            <p class="step-description">Agora vamos aplicar os conceitos aprendidos na prepara√ß√£o do <strong>Checkpoint 1 do projeto</strong>. Analisaremos nosso dataset e definiremos estrat√©gias de amostragem e an√°lise quantitativa.</p>
            
            <div class="theory-box">
                <h4>üìã Entreg√°veis do Checkpoint 1</h4>
                <p>Defini√ß√£o do dataset, esbo√ßo da modelagem dimensional, identifica√ß√£o de transforma√ß√µes necess√°rias e planejamento das an√°lises quantitativas que ser√£o aplicadas nos dados estruturados.</p>
            </div>
            
            <div class="code-block">
                <div class="code-header">
                    <span>üìã An√°lise Estat√≠stica para o Projeto</span>
                    <button class="copy-button" onclick="copyCode(this)">Copiar</button>
                </div>
<pre><code><span class="syntax-function">print</span>(<span class="syntax-string">"\n" + "="*60</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">"üìã PREPARA√á√ÉO PARA CHECKPOINT 1"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">"="*60</span>)

<span class="syntax-function">print</span>(<span class="syntax-string">"\nüéØ ROTEIRO DE AN√ÅLISE PARA SEU PROJETO:"</span>)

<span class="syntax-comment"># 1. An√°lise explorat√≥ria do dataset</span>
<span class="syntax-function">print</span>(<span class="syntax-string">f"\n1Ô∏è‚É£ AN√ÅLISE EXPLORAT√ìRIA INICIAL"</span>)

<span class="syntax-comment"># Criar um relat√≥rio estat√≠stico resumido do dataset</span>
relatorio_dataset = {
    <span class="syntax-string">'Tamanho da Popula√ß√£o'</span>: <span class="syntax-function">len</span>(df_populacao),
    <span class="syntax-string">'N√∫mero de Vari√°veis'</span>: <span class="syntax-function">len</span>(df_populacao.columns),
    <span class="syntax-string">'Per√≠odo Temporal'</span>: <span class="syntax-string">'2024 (simulado)'</span>,
    <span class="syntax-string">'Vari√°veis Num√©ricas'</span>: [<span class="syntax-string">'customer_age'</span>, <span class="syntax-string">'unit_price'</span>, <span class="syntax-string">'quantity'</span>, <span class="syntax-string">'total_amount'</span>],
    <span class="syntax-string">'Vari√°veis Categ√≥ricas'</span>: [<span class="syntax-string">'product_category'</span>, <span class="syntax-string">'region'</span>],
    <span class="syntax-string">'Gr√£o dos Dados'</span>: <span class="syntax-string">'Transa√ß√£o individual'</span>
}

<span class="syntax-keyword">for</span> chave, valor <span class="syntax-keyword">in</span> relatorio_dataset.items():
    <span class="syntax-function">print</span>(<span class="syntax-string">f"   üìä {chave}: {valor}"</span>)

<span class="syntax-comment"># 2. Identifica√ß√£o de distribui√ß√µes nos dados</span>
<span class="syntax-function">print</span>(<span class="syntax-string">f"\n2Ô∏è‚É£ CARACTERIZA√á√ÉO DAS DISTRIBUI√á√ïES"</span>)

variaveis_analise = [<span class="syntax-string">'customer_age'</span>, <span class="syntax-string">'unit_price'</span>, <span class="syntax-string">'total_amount'</span>]

<span class="syntax-keyword">for</span> var <span class="syntax-keyword">in</span> variaveis_analise:
    dados_var = df_populacao[var]
    <span class="syntax-function">print</span>(<span class="syntax-string">f"\n   üìà {var}:"</span>)
    <span class="syntax-function">print</span>(<span class="syntax-string">f"      M√©dia: {dados_var.mean():.2f}"</span>)
    <span class="syntax-function">print</span>(<span class="syntax-string">f"      Mediana: {dados_var.median():.2f}"</span>)
    <span class="syntax-function">print</span>(<span class="syntax-string">f"      Desvio padr√£o: {dados_var.std():.2f}"</span>)
    <span class="syntax-function">print</span>(<span class="syntax-string">f"      Assimetria: {dados_var.skew():.3f}"</span>)
    
    <span class="syntax-comment"># Classificar tipo de distribui√ß√£o</span>
    <span class="syntax-keyword">if</span> <span class="syntax-function">abs</span>(dados_var.skew()) < <span class="syntax-number">0.5</span>:
        tipo_dist = <span class="syntax-string">"Aproximadamente normal"</span>
    <span class="syntax-keyword">elif</span> dados_var.skew() > <span class="syntax-number">1</span>:
        tipo_dist = <span class="syntax-string">"Fortemente assim√©trica √† direita"</span>
    <span class="syntax-keyword">elif</span> dados_var.skew() > <span class="syntax-number">0.5</span>:
        tipo_dist = <span class="syntax-string">"Moderadamente assim√©trica √† direita"</span>
    <span class="syntax-keyword">else</span>:
        tipo_dist = <span class="syntax-string">"Assim√©trica √† esquerda"</span>
    
    <span class="syntax-function">print</span>(<span class="syntax-string">f"      Tipo: {tipo_dist}"</span>)

<span class="syntax-comment"># 3. Estrat√©gia de amostragem recomendada</span>
<span class="syntax-function">print</span>(<span class="syntax-string">f"\n3Ô∏è‚É£ ESTRAT√âGIA DE AMOSTRAGEM RECOMENDADA"</span>)

<span class="syntax-comment"># Analisar variabilidade entre grupos</span>
variabilidade_regioes = df_populacao.groupby(<span class="syntax-string">'region'</span>)[<span class="syntax-string">'total_amount'</span>].agg([<span class="syntax-string">'mean'</span>, <span class="syntax-string">'std'</span>])
cv_regioes = (variabilidade_regioes[<span class="syntax-string">'std'</span>] / variabilidade_regioes[<span class="syntax-string">'mean'</span>]).mean()

<span class="syntax-function">print</span>(<span class="syntax-string">f"   üéØ Coeficiente de varia√ß√£o entre regi√µes: {cv_regioes:.3f}"</span>)

<span class="syntax-keyword">if</span> cv_regioes > <span class="syntax-number">0.3</span>:
    <span class="syntax-function">print</span>(<span class="syntax-string">f"   ‚úÖ Recomenda√ß√£o: Amostragem ESTRATIFICADA por regi√£o"</span>)
    <span class="syntax-function">print</span>(<span class="syntax-string">f"      Raz√£o: Alta variabilidade entre regi√µes"</span>)
<span class="syntax-keyword">else</span>:
    <span class="syntax-function">print</span>(<span class="syntax-string">f"   ‚úÖ Recomenda√ß√£o: Amostragem ALEAT√ìRIA SIMPLES"</span>)
    <span class="syntax-function">print</span>(<span class="syntax-string">f"      Raz√£o: Baixa variabilidade entre regi√µes"</span>)

<span class="syntax-comment"># Calcular tamanho m√≠nimo de amostra</span>
margem_erro = <span class="syntax-number">0.05</span>  <span class="syntax-comment"># 5%</span>
confianca = <span class="syntax-number">0.95</span>   <span class="syntax-comment"># 95%</span>
z_score = stats.norm.ppf(<span class="syntax-number">1</span> - (<span class="syntax-number">1</span> - confianca) / <span class="syntax-number">2</span>)

<span class="syntax-comment"># Para propor√ß√£o (f√≥rmula conservadora p=0.5)</span>
n_min_prop = (<span class="syntax-function">int</span>)((z_score ** <span class="syntax-number">2</span> * <span class="syntax-number">0.5</span> * <span class="syntax-number">0.5</span>) / (margem_erro ** <span class="syntax-number">2</span>))

<span class="syntax-function">print</span>(<span class="syntax-string">f"\n   üìê Tamanho m√≠nimo de amostra:"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"      Para propor√ß√µes: {n_min_prop} (margem de erro 5%, confian√ßa 95%)"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"      Para an√°lises gerais: 1000+ (2% da popula√ß√£o atual)"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"      Para Machine Learning: 70% treino, 15% valida√ß√£o, 15% teste"</span>)</code></pre>
            </div>

            <div class="explanation-box">
                <h5>üîç Relat√≥rio Estat√≠stico:</h5>
                <p><strong>An√°lise Explorat√≥ria:</strong> Caracteriza√ß√£o b√°sica do dataset | <strong>Distribui√ß√µes:</strong> Identifica√ß√£o de padr√µes estat√≠sticos | <strong>Amostragem:</strong> Estrat√©gia baseada na variabilidade dos dados | <strong>Tamanho:</strong> C√°lculo baseado em margem de erro e confian√ßa desejadas</p>
            </div>

            <div class="code-block">
                <div class="code-header">
                    <span>üéØ Template para o Checkpoint 1</span>
                    <button class="copy-button" onclick="copyCode(this)">Copiar</button>
                </div>
<pre><code><span class="syntax-comment"># 4. TEMPLATE PARA CHECKPOINT 1 DO PROJETO</span>
<span class="syntax-function">print</span>(<span class="syntax-string">f"\n4Ô∏è‚É£ TEMPLATE PARA SEU CHECKPOINT 1"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"="*50</span>)

template_checkpoint = <span class="syntax-string">"""
üìã CHECKPOINT 1 - AN√ÅLISE ESTAT√çSTICA DO DATASET

üéØ 1. DEFINI√á√ÉO DO PROBLEMA E DATASET
   ‚Ä¢ Fonte dos dados: [Descreva aqui]
   ‚Ä¢ Tamanho: [X registros, Y vari√°veis]
   ‚Ä¢ Per√≠odo: [Temporal dos dados]
   ‚Ä¢ Objetivo: [Problema de neg√≥cio a resolver]

üìä 2. AN√ÅLISE EXPLORAT√ìRIA INICIAL
   ‚Ä¢ Vari√°veis num√©ricas: [Lista]
   ‚Ä¢ Vari√°veis categ√≥ricas: [Lista]
   ‚Ä¢ Valores ausentes: [An√°lise]
   ‚Ä¢ Outliers identificados: [Descri√ß√£o]

üìà 3. CARACTERIZA√á√ÉO DAS DISTRIBUI√á√ïES
   ‚Ä¢ Vari√°vel 1: [Normal/Log-normal/Assim√©trica]
   ‚Ä¢ Vari√°vel 2: [Distribui√ß√£o identificada]
   ‚Ä¢ Transforma√ß√µes necess√°rias: [Log, sqrt, etc.]

üé≤ 4. ESTRAT√âGIA DE AMOSTRAGEM
   ‚Ä¢ M√©todo escolhido: [Aleat√≥ria/Estratificada/Sistem√°tica]
   ‚Ä¢ Justificativa: [Baseado na variabilidade]
   ‚Ä¢ Tamanho da amostra: [C√°lculo estat√≠stico]

üîß 5. MODELAGEM DIMENSIONAL PROPOSTA
   ‚Ä¢ Tabela Fato: [Nome e gr√£o]
   ‚Ä¢ Dimens√µes: [Lista das dimens√µes]
   ‚Ä¢ Medidas/KPIs: [M√©tricas principais]

üìã 6. PLANO DE AN√ÅLISES QUANTITATIVAS
   ‚Ä¢ Testes estat√≠sticos previstos: [t-test, ANOVA, etc.]
   ‚Ä¢ An√°lises de correla√ß√£o: [Pearson, Spearman]
   ‚Ä¢ T√©cnicas de ML: [Regress√£o, classifica√ß√£o, clustering]

‚ö†Ô∏è 7. LIMITA√á√ïES E CONSIDERA√á√ïES
   ‚Ä¢ Vieses identificados: [Sele√ß√£o, temporal, etc.]
   ‚Ä¢ Premissas assumidas: [Normalidade, independ√™ncia]
   ‚Ä¢ Riscos e mitiga√ß√µes: [Overfitting, dados ausentes]
"""</span>

<span class="syntax-function">print</span>(template_checkpoint)

<span class="syntax-comment"># 5. CHECKLIST FINAL</span>
<span class="syntax-function">print</span>(<span class="syntax-string">f"\n5Ô∏è‚É£ CHECKLIST FINAL PARA O CHECKPOINT 1"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"="*50</span>)

checklist = [
    <span class="syntax-string">"‚úÖ Dataset definido e carregado"</span>,
    <span class="syntax-string">"‚úÖ An√°lise explorat√≥ria completa"</span>,
    <span class="syntax-string">"‚úÖ Distribui√ß√µes caracterizadas"</span>,
    <span class="syntax-string">"‚úÖ Estrat√©gia de amostragem definida"</span>,
    <span class="syntax-string">"‚úÖ Modelagem dimensional esbo√ßada"</span>,
    <span class="syntax-string">"‚úÖ Transforma√ß√µes identificadas"</span>,
    <span class="syntax-string">"‚úÖ Plano de an√°lises quantitativas"</span>,
    <span class="syntax-string">"‚úÖ Limita√ß√µes documentadas"</span>
]

<span class="syntax-keyword">for</span> item <span class="syntax-keyword">in</span> checklist:
    <span class="syntax-function">print</span>(<span class="syntax-string">f"   {item}"</span>)

<span class="syntax-function">print</span>(<span class="syntax-string">f"\nüí° DICAS IMPORTANTES:"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"   üìä Use gr√°ficos para ilustrar suas descobertas"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"   üî¢ Inclua estat√≠sticas descritivas detalhadas"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"   üìà Justifique escolhas com base nos dados"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"   ‚öñÔ∏è Balance rigor t√©cnico com clareza"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"   üéØ Conecte an√°lises ao problema de neg√≥cio"</span>)</code></pre>
            </div>

            <div class="explanation-box">
                <h5>üîç Guia para o Checkpoint 1:</h5>
                <p><strong>Template Completo:</strong> Estrutura detalhada para documentar sua an√°lise | <strong>Checklist:</strong> Itens obrigat√≥rios para entrega | <strong>Dicas:</strong> Melhores pr√°ticas para apresenta√ß√£o | <strong>Foco:</strong> Conex√£o entre an√°lise t√©cnica e valor de neg√≥cio</p>
            </div>
        </div>

        <!-- Conclus√£o -->
        <div class="step-container">
            <div class="step-header">
                <div class="step-number">6</div>
                <h2 class="step-title">Conclus√£o e Pr√≥ximos Passos</h2>
            </div>
            <div class="stats-badge">üéâ Resumo</div>
            <p class="step-description">Parab√©ns! Voc√™ completou a aplica√ß√£o pr√°tica de m√©todos quantitativos e amostragem. Vamos revisar o que aprendemos e definir os pr√≥ximos passos.</p>
            
            <div class="highlight-box">
                <h4>üéØ O que voc√™ dominou hoje</h4>
                <p>Implementa√ß√£o de quatro t√©cnicas de amostragem, an√°lise de distribui√ß√µes de dados, demonstra√ß√£o pr√°tica do Teorema Central do Limite e prepara√ß√£o estruturada para o primeiro checkpoint do projeto. Estes s√£o fundamentos essenciais para qualquer an√°lise estat√≠stica robusta.</p>
            </div>

            <div class="code-block">
                <div class="code-header">
                    <span>üìã Resumo dos Conceitos Aplicados</span>
                    <button class="copy-button" onclick="copyCode(this)">Copiar</button>
                </div>
<pre><code><span class="syntax-function">print</span>(<span class="syntax-string">"\n" + "="*60</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">"üéâ RESUMO DA AULA 3: M√âTODOS QUANTITATIVOS"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">"="*60</span>)

<span class="syntax-function">print</span>(<span class="syntax-string">f"\n‚úÖ CONCEITOS DOMINADOS:"</span>)

conceitos_aplicados = {
    <span class="syntax-string">"üé≤ Amostragem Aleat√≥ria Simples"</span>: <span class="syntax-string">"Sele√ß√£o equiprov√°vel de elementos"</span>,
    <span class="syntax-string">"üìä Amostragem Estratificada"</span>: <span class="syntax-string">"Representa√ß√£o proporcional de subgrupos"</span>,
    <span class="syntax-string">"‚öôÔ∏è Amostragem Sistem√°tica"</span>: <span class="syntax-string">"Sele√ß√£o em intervalos regulares"</span>,
    <span class="syntax-string">"üéØ Amostragem por Conglomerados"</span>: <span class="syntax-string">"Sele√ß√£o de grupos inteiros"</span>,
    <span class="syntax-string">"üìà An√°lise de Distribui√ß√µes"</span>: <span class="syntax-string">"Identifica√ß√£o de padr√µes estat√≠sticos"</span>,
    <span class="syntax-string">"üß™ Teorema Central do Limite"</span>: <span class="syntax-string">"Converg√™ncia √† normalidade das m√©dias"</span>,
    <span class="syntax-string">"üîç Estat√≠stica Descritiva"</span>: <span class="syntax-string">"Medidas de posi√ß√£o, dispers√£o e forma"</span>,
    <span class="syntax-string">"üìã Prepara√ß√£o de Projeto"</span>: <span class="syntax-string">"Estrutura√ß√£o do Checkpoint 1"</span>
}

<span class="syntax-keyword">for</span> conceito, descricao <span class="syntax-keyword">in</span> conceitos_aplicados.items():
    <span class="syntax-function">print</span>(<span class="syntax-string">f"   {conceito}: {descricao}"</span>)

<span class="syntax-function">print</span>(<span class="syntax-string">f"\nüìä RESULTADOS OBTIDOS:"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"   ‚Ä¢ Popula√ß√£o analisada: {len(df_populacao):,} transa√ß√µes"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"   ‚Ä¢ Amostras criadas: 4 m√©todos diferentes"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"   ‚Ä¢ Distribui√ß√µes identificadas: Normal e Log-normal"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"   ‚Ä¢ TCL demonstrado: {len(tamanhos_amostra)} tamanhos de amostra"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"   ‚Ä¢ Template do projeto: Estrutura completa"</span>)

<span class="syntax-function">print</span>(<span class="syntax-string">f"\nüéØ PR√ìXIMOS PASSOS:"</span>)
proximos_passos = [
    <span class="syntax-string">"1. Aplicar estes conceitos ao seu dataset do projeto"</span>,
    <span class="syntax-string">"2. Completar o Checkpoint 1 usando o template fornecido"</span>,
    <span class="syntax-string">"3. Escolher a estrat√©gia de amostragem mais adequada"</span>,
    <span class="syntax-string">"4. Documentar todas as an√°lises explorat√≥rias"</span>,
    <span class="syntax-string">"5. Preparar-se para t√©cnicas avan√ßadas de ML"</span>
]

<span class="syntax-keyword">for</span> passo <span class="syntax-keyword">in</span> proximos_passos:
    <span class="syntax-function">print</span>(<span class="syntax-string">f"   {passo}"</span>)

<span class="syntax-function">print</span>(<span class="syntax-string">f"\nüí° LEMBRETE IMPORTANTE:"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"   A qualidade da an√°lise estat√≠stica determina"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"   a confiabilidade de todos os modelos posteriores!"</span>)

<span class="syntax-function">print</span>(<span class="syntax-string">f"\nüéâ Parab√©ns! Voc√™ est√° preparado para an√°lises"</span>)
<span class="syntax-function">print</span>(<span class="syntax-string">f"   estat√≠sticas robustas e cient√≠ficas! üìä‚ú®"</span>)</code></pre>
            </div>

            <div class="theory-box">
                <h4>üöÄ Para a Pr√≥xima Aula</h4>
                <p>Na pr√≥xima aula, aplicaremos t√©cnicas avan√ßadas de Machine Learning aos dados preparados. Usaremos as amostras criadas hoje para treinar modelos de classifica√ß√£o, regress√£o e clustering, demonstrando como a prepara√ß√£o estat√≠stica adequada impacta diretamente na performance dos algoritmos.</p>
            </div>

            <div class="warning-box">
                <h4>‚ö†Ô∏è Pontos de Aten√ß√£o</h4>
                <p>Lembre-se: a escolha do m√©todo de amostragem deve sempre considerar o objetivo da an√°lise, a variabilidade dos dados e os recursos dispon√≠veis. N√£o existe um m√©todo "melhor" universal - cada situa√ß√£o demanda uma abordagem espec√≠fica baseada em crit√©rios estat√≠sticos s√≥lidos.</p>
            </div>

            <div class="info-panel">
                <h4>üìö Recursos Complementares</h4>
                <p>Para aprofundar seus conhecimentos, estude: Teorema do Limite Central em detalhes, c√°lculo de tamanhos amostrais para diferentes tipos de an√°lise, testes de normalidade (Kolmogorov-Smirnov, Anderson-Darling), e t√©cnicas de corre√ß√£o de vieses amostrais. A documenta√ß√£o do SciPy √© uma excelente refer√™ncia para implementa√ß√µes avan√ßadas.</p>
            </div>
        </div>
    </div>

    <script>
        // Fun√ß√£o para copiar c√≥digo
        function copyCode(button) {
            try {
                // Encontrar o bloco de c√≥digo relacionado ao bot√£o
                const codeBlock = button.closest('.code-block');
                const codeContent = codeBlock.querySelector('pre code');
                
                if (!codeContent) {
                    console.error('Conte√∫do do c√≥digo n√£o encontrado');
                    return;
                }

                // Criar um elemento tempor√°rio para selecionar o texto
                const tempTextArea = document.createElement('textarea');
                tempTextArea.value = codeContent.textContent || codeContent.innerText;
                document.body.appendChild(tempTextArea);
                
                // Selecionar e copiar o texto
                tempTextArea.select();
                tempTextArea.setSelectionRange(0, 99999); // Para dispositivos m√≥veis
                
                // Tentar copiar usando a API moderna primeiro
                if (navigator.clipboard && navigator.clipboard.writeText) {
                    navigator.clipboard.writeText(tempTextArea.value).then(() => {
                        showCopyFeedback(button, true);
                    }).catch(err => {
                        // Fallback para o m√©todo antigo
                        const success = document.execCommand('copy');
                        showCopyFeedback(button, success);
                    });
                } else {
                    // M√©todo antigo para navegadores mais antigos
                    const success = document.execCommand('copy');
                    showCopyFeedback(button, success);
                }
                
                // Remover o elemento tempor√°rio
                document.body.removeChild(tempTextArea);
                
            } catch (err) {
                console.error('Erro ao copiar c√≥digo:', err);
                showCopyFeedback(button, false);
            }
        }

        // Fun√ß√£o para mostrar feedback visual
        function showCopyFeedback(button, success) {
            const originalText = button.textContent;
            
            if (success) {
                button.textContent = '‚úÖ Copiado!';
                button.classList.add('copy-success');
                
                // Restaurar texto original ap√≥s 2 segundos
                setTimeout(() => {
                    button.textContent = originalText;
                    button.classList.remove('copy-success');
                }, 2000);
            } else {
                button.textContent = '‚ùå Erro';
                button.style.background = '#dc3545';
                
                // Restaurar texto original ap√≥s 2 segundos
                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.background = '#0052cc';
                }, 2000);
            }
        }

        // Adicionar evento de carregamento da p√°gina
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üìã Sistema de c√≥pia de c√≥digo carregado!');
            
            // Verificar se a API de clipboard est√° dispon√≠vel
            if (navigator.clipboard) {
                console.log('‚úÖ API moderna de clipboard dispon√≠vel');
            } else {
                console.log('‚ö†Ô∏è Usando m√©todo de fallback para c√≥pia');
            }
            
            // Contar quantos blocos de c√≥digo existem
            const codeBlocks = document.querySelectorAll('.code-block');
            console.log(`üìù ${codeBlocks.length} blocos de c√≥digo encontrados`);
        });

        // Fun√ß√£o para melhorar a experi√™ncia em dispositivos m√≥veis
        function initMobileSupport() {
            // Detectar se √© dispositivo m√≥vel
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            
            if (isMobile) {
                // Adicionar classe CSS espec√≠fica para mobile
                document.body.classList.add('mobile-device');
                
                // Ajustar comportamento dos bot√µes de copiar
                const copyButtons = document.querySelectorAll('.copy-button');
                copyButtons.forEach(button => {
                    button.addEventListener('touchstart', function(e) {
                        e.preventDefault();
                        copyCode(this);
                    });
                });
            }
        }

        // Inicializar suporte mobile quando a p√°gina carregar
        document.addEventListener('DOMContentLoaded', initMobileSupport);
    </script>

<script>
(function () {
  // Inject header + copy button into any <pre><code> that doesn't already have .code-header
  document.querySelectorAll('pre').forEach(pre => {
    const code = pre.querySelector('code');
    if (!code) return;

    // Wrap in .code-block if missing
    let wrapper = pre.closest('.code-block');
    if (!wrapper) {
      wrapper = document.createElement('div');
      wrapper.className = 'code-block';
      pre.parentNode.insertBefore(wrapper, pre);
      wrapper.appendChild(pre);
    }

    // Create header if missing
    if (!wrapper.querySelector('.code-header')) {
      const header = document.createElement('div');
      header.className = 'code-header';
      const title = document.createElement('span');
      title.textContent = 'üìã C√≥digo';
      const btn = document.createElement('button');
      btn.className = 'copy-button';
      btn.type = 'button';
      btn.textContent = 'Copiar';
      btn.addEventListener('click', () => copyCode(btn));
      header.appendChild(title);
      header.appendChild(btn);
      wrapper.insertBefore(header, pre);
    }
  });

  // Copy function mirroring the reference behavior
  window.copyCode = function (button) {
    const codeBlock = button.closest('.code-block');
    const code = codeBlock.querySelector('pre code').textContent;
    navigator.clipboard.writeText(code).then(() => {
      button.textContent = 'Copiado!';
      button.style.background = '#4caf50';
      setTimeout(() => {
        button.textContent = 'Copiar';
        button.style.background = '#0052cc';
      }, 2000);
    }).catch(err => {
      console.error('Erro ao copiar:', err);
      button.textContent = 'Erro';
      button.style.background = '#f44336';
      setTimeout(() => {
        button.textContent = 'Copiar';
        button.style.background = '#0052cc';
      }, 2000);
    });
  };
})();
</script>

</body>
</html>
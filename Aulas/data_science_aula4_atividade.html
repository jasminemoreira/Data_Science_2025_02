<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roteiro Pr√°tico - Medidas Estat√≠sticas com Dados Musicais</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        body{
            font-family:-apple-system,BlinkMacSystemFont,'SF Pro Display',system-ui,sans-serif;
            background:linear-gradient(135deg,#f5f7fa 0%,#c3cfe2 100%);
            min-height:100vh;padding:20px
        }
        .container{
            max-width:1200px;margin:0 auto;background:rgba(255,255,255,0.95);
            backdrop-filter:blur(20px);border-radius:24px;padding:40px;
            box-shadow:0 20px 40px rgba(25,20,20,.2);border:1px solid rgba(255,255,255,.3);
            animation:fadeInUp .8s cubic-bezier(.4,0,.2,1)
        }
        .header{text-align:center;margin-bottom:40px}
        .badge{background:linear-gradient(135deg,#0052cc,#003d99);color:#fff;padding:10px 20px;border-radius:25px;font-size:14px;font-weight:600;display:inline-block;margin-bottom:20px;box-shadow:0 4px 15px rgba(29,185,84,.3)}
        .stats-badge{background:linear-gradient(135deg,#e91e63,#ad1457);color:#fff;padding:6px 14px;border-radius:15px;font-size:12px;font-weight:600;display:inline-block;margin-bottom:15px;box-shadow:0 2px 8px rgba(233,30,99,.3)}
        .title{font-size:2.5rem;font-weight:700;color:#1a1a1a;margin-bottom:12px;background:linear-gradient(135deg,#0052cc,#1976d2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
        .subtitle{font-size:1.2rem;color:#666;font-weight:400;margin-bottom:30px}
        .step-container{background:rgba(255,255,255,.7);backdrop-filter:blur(10px);border-radius:16px;border-left:6px solid #0052cc;padding:30px;margin-bottom:30px;box-shadow:0 8px 25px rgba(29,185,84,.1);transition:transform .3s cubic-bezier(.4,0,.2,1)}
        .step-container:hover{transform:translateY(-5px)}
        .step-header{display:flex;align-items:center;gap:15px;margin-bottom:20px}
        .step-number{background:linear-gradient(135deg,#0052cc,#003d99);color:#fff;width:45px;height:45px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:18px;flex-shrink:0;box-shadow:0 4px 15px rgba(29,185,84,.3)}
        .step-title{color:#0052cc;font-size:1.5rem;font-weight:600;margin:0}
        .step-description{color:#444;line-height:1.7;font-size:1.1rem;margin-bottom:20px}
        .theory-box{background:rgba(233,30,99,.1);border:2px solid rgba(233,30,99,.3);border-radius:16px;padding:20px;margin:20px 0}
        .theory-box h4{color:#e91e63;font-size:1.2rem;margin-bottom:12px;font-weight:600;display:flex;align-items:center;gap:10px}
        .code-block{background:#1e1e1e;color:#d4d4d4;padding:25px;border-radius:12px;font-family:'Monaco','Menlo','Ubuntu Mono',monospace;font-size:14px;line-height:1.6;overflow-x:auto;margin:20px 0;border-left:4px solid #0052cc;position:relative}
        .code-header{background:#2d2d2d;color:#fff;padding:10px 20px;margin:-25px -25px 15px -25px;border-radius:12px 12px 0 0;font-size:12px;font-weight:600;display:flex;justify-content:space-between;align-items:center}
        .copy-button{background:#0052cc;color:#fff;border:none;padding:5px 12px;border-radius:6px;font-size:11px;cursor:pointer;transition:background .3s,transform .2s}
        .copy-button:hover{background:#003d99;transform:scale(1.05)}
        .output-example{background:rgba(76,175,80,.1);border:2px solid rgba(76,175,80,.3);border-radius:12px;padding:20px;margin:15px 0;font-family:monospace;font-size:13px}
        .output-header{color:#388e3c;font-weight:600;margin-bottom:10px;display:flex;align-items:center;gap:8px}
        .highlight-box{background:linear-gradient(135deg,#0052cc,#003d99);color:#fff;padding:25px;border-radius:16px;margin:25px 0;backdrop-filter:blur(10px);box-shadow:0 8px 25px rgba(29,185,84,.3)}
        .highlight-box h4{font-size:1.3rem;margin-bottom:12px;font-weight:600;display:flex;align-items:center;gap:10px}
        .warning-box{background:rgba(255,193,7,.1);border:2px solid rgba(255,193,7,.3);border-radius:16px;padding:20px;margin:20px 0}
        .warning-box h4{color:#f57c00;font-size:1.2rem;margin-bottom:12px;font-weight:600;display:flex;align-items:center;gap:10px}
        .info-panel{background:rgba(29,185,84,.1);border:2px solid rgba(29,185,84,.2);border-radius:16px;padding:20px;margin:20px 0}
        .info-panel h4{color:#0052cc;font-size:1.2rem;margin-bottom:12px;font-weight:600;display:flex;align-items:center;gap:10px}
        .explanation-box{background:rgba(255,255,255,.5);border-radius:12px;padding:20px;margin:15px 0;border-left:4px solid #0052cc}
        .explanation-box h5{color:#0052cc;font-size:1.1rem;margin-bottom:10px;font-weight:600}
        .explanation-box p{color:#555;line-height:1.6;font-size:.95rem}
        .syntax-keyword{color:#569cd6}.syntax-string{color:#ce9178}.syntax-comment{color:#6a9955}.syntax-number{color:#b5cea8}.syntax-function{color:#dcdcaa}
        @keyframes fadeInUp{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}
        @media (max-width:768px){.container{padding:25px;margin:10px}.title{font-size:2rem}.step-container{padding:20px}.code-block{padding:15px;font-size:12px}.step-header{flex-direction:column;align-items:flex-start;gap:10px}.step-number{width:35px;height:35px;font-size:16px}.step-title{font-size:1.3rem}}
    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <div class="badge">üéµ Roteiro Pr√°tico - Aula 4</div>
        <h1 class="title">Medidas Estat√≠sticas com Dados Musicais</h1>
        <p class="subtitle">Descobrindo padr√µes estat√≠sticos no universo do streaming musical</p>
    </div>

    <div class="highlight-box">
        <h4>üéØ O que vamos descobrir hoje</h4>
        <p>Aplicaremos medidas de tend√™ncia central, dispers√£o, correla√ß√£o e testes de hip√≥tese em um dataset <em>estilo Spotify</em> gerado sinteticamente.</p>
    </div>

    <div class="info-panel">
        <h4>üîß Prepara√ß√£o</h4>
        <p>Abra o Google Colab e crie o notebook <strong>Aula4_Estatisticas_Musicais</strong>.</p>
    </div>

    <!-- Passo 1 (resumo) -->
    <div class="step-container">
        <div class="step-header">
            <div class="step-number">1</div>
            <h2 class="step-title">Configura√ß√£o e Cria√ß√£o do Dataset Musical</h2>
        </div>
        <div class="stats-badge">üéµ Dados Musicais</div>
        <p class="step-description">Simule um cat√°logo de 10 mil faixas com m√©tricas comuns do Spotify.</p>

        <div class="code-block">
            <div class="code-header"><span>üéµ Configura√ß√£o do Ambiente Musical</span><button class="copy-button">Copiar</button></div>
<pre><code><span class="syntax-keyword">import</span> pandas <span class="syntax-keyword">as</span> pd
<span class="syntax-keyword">import</span> numpy <span class="syntax-keyword">as</span> np
<span class="syntax-keyword">import</span> matplotlib.pyplot <span class="syntax-keyword">as</span> plt
<span class="syntax-keyword">import</span> seaborn <span class="syntax-keyword">as</span> sns
<span class="syntax-keyword">import</span> scipy.stats <span class="syntax-keyword">as</span> stats
np.random.seed(<span class="syntax-number">42</span>)
plt.style.use(<span class="syntax-string">'dark_background'</span>)
sns.set_palette([<span class="syntax-string">'#1DB954'</span>,<span class="syntax-string">'#1ED760'</span>,<span class="syntax-string">'#FFD23F'</span>])</code></pre>
        </div>

        <div class="code-block">
            <div class="code-header"><span>üéº Cria√ß√£o do Dataset Musical Completo</span><button class="copy-button">Copiar</button></div>
<pre><code>n_tracks = <span class="syntax-number">10000</span>
generos = [<span class="syntax-string">'Pop'</span>,<span class="syntax-string">'Rock'</span>,<span class="syntax-string">'Hip Hop'</span>,<span class="syntax-string">'Eletr√¥nica'</span>,<span class="syntax-string">'Indie'</span>,<span class="syntax-string">'R&amp;B'</span>,<span class="syntax-string">'Country'</span>,<span class="syntax-string">'Jazz'</span>,<span class="syntax-string">'Reggae'</span>,<span class="syntax-string">'Metal'</span>]

dados = {
  <span class="syntax-string">'energia'</span>: np.random.beta(<span class="syntax-number">2</span>,<span class="syntax-number">2</span>, n_tracks),
  <span class="syntax-string">'valencia'</span>: np.random.beta(<span class="syntax-number">2</span>,<span class="syntax-number">3</span>, n_tracks),
  <span class="syntax-string">'dancabilidade'</span>: np.random.beta(<span class="syntax-number">3</span>,<span class="syntax-number">2</span>, n_tracks),
  <span class="syntax-string">'acousticness'</span>: np.random.beta(<span class="syntax-number">1</span>,<span class="syntax-number">4</span>, n_tracks),
  <span class="syntax-string">'liveness'</span>: np.random.beta(<span class="syntax-number">1</span>,<span class="syntax-number">9</span>, n_tracks),
  <span class="syntax-string">'duracao_segundos'</span>: np.random.lognormal(mean=<span class="syntax-number">5.3</span>, sigma=<span class="syntax-number">0.3</span>, size=n_tracks),
  <span class="syntax-string">'popularidade'</span>: np.random.gamma(shape=<span class="syntax-number">2</span>, scale=<span class="syntax-number">15</span>, size=n_tracks),
  <span class="syntax-string">'streams_milhoes'</span>: np.random.pareto(<span class="syntax-number">1.5</span>, n_tracks)*<span class="syntax-number">0.1</span>,
  <span class="syntax-string">'ano_lancamento'</span>: np.random.choice(<span class="syntax-function">range</span>(<span class="syntax-number">1960</span>,<span class="syntax-number">2025</span>), size=n_tracks),
  <span class="syntax-string">'genero'</span>: np.random.choice(generos, size=n_tracks, p=[<span class="syntax-number">.25</span>,<span class="syntax-number">.18</span>,<span class="syntax-number">.15</span>,<span class="syntax-number">.12</span>,<span class="syntax-number">.08</span>,<span class="syntax-number">.08</span>,<span class="syntax-number">.05</span>,<span class="syntax-number">.03</span>,<span class="syntax-number">.03</span>,<span class="syntax-number">.03</span>])
}
df = pd.DataFrame(dados)
df[<span class="syntax-string">'popularidade'</span>] = np.clip(df[<span class="syntax-string">'popularidade'</span>] + df[<span class="syntax-string">'dancabilidade'</span>]*<span class="syntax-number">20</span> + np.random.normal(<span class="syntax-number">0</span>,<span class="syntax-number">5</span>,n_tracks), <span class="syntax-number">0</span>, <span class="syntax-number">100</span>)
df[<span class="syntax-string">'streams_milhoes'</span>] *= (df[<span class="syntax-string">'popularidade'</span>] / <span class="syntax-number">50</span>)
df[<span class="syntax-string">'duracao_minutos'</span>] = df[<span class="syntax-string">'duracao_segundos'</span>] / <span class="syntax-number">60</span>
</code></pre>
        </div>

        <div class="explanation-box">
            <h5>üéµ Dataset Musical Realista</h5>
            <p>Correla√ß√£o intencional: <em>dancabilidade ‚Üí popularidade ‚Üí streams</em>.</p>
        </div>
    </div>

    <!-- Passo 2 -->
    <div class="step-container">
        <div class="step-header">
            <div class="step-number">2</div>
            <h2 class="step-title">Medidas de Tend√™ncia Central Musical</h2>
        </div>
        <div class="stats-badge">üìä Tend√™ncia Central</div>
        <p class="step-description">M√©dia, mediana e moda para dura√ß√£o, popularidade e caracter√≠sticas (0‚Äì1).</p>

        <div class="code-block">
            <div class="code-header"><span>üéµ An√°lise de Tend√™ncia Central</span><button class="copy-button">Copiar</button></div>
<pre><code>duracao = df[<span class="syntax-string">'duracao_minutos'</span>]
print(<span class="syntax-string">f"M√©dia: {duracao.mean():.2f} | Mediana: {duracao.median():.2f}"</span>)

popularidade = df[<span class="syntax-string">'popularidade'</span>]
print(<span class="syntax-string">f"Pop m√©dia: {popularidade.mean():.1f} | Pop mediana: {popularidade.median():.1f}"</span>)

caracteristicas = [<span class="syntax-string">'energia'</span>,<span class="syntax-string">'valencia'</span>,<span class="syntax-string">'dancabilidade'</span>,<span class="syntax-string">'acousticness'</span>,<span class="syntax-string">'liveness'</span>]
for c in caracteristicas:
    print(c, <span class="syntax-string">"‚Üí"</span>, <span class="syntax-string">"m√©dia"</span>, df[c].mean().round(<span class="syntax-number">3</span>), <span class="syntax-string">"| mediana"</span>, df[c].median().round(<span class="syntax-number">3</span>))</code></pre>
        </div>
    </div>

    <!-- Passo 3: Dispers√£o -->
    <div class="step-container">
        <div class="step-header">
            <div class="step-number">3</div>
            <h2 class="step-title">Medidas de Dispers√£o Musical</h2>
        </div>
        <div class="stats-badge">üìè Dispers√£o</div>
        <p class="step-description">Vari√¢ncia, desvio padr√£o, amplitude e IQR. Detec√ß√£o de outliers por IQR e Z-score.</p>

        <div class="theory-box">
            <h4>üìê Variabilidade no Mundo Musical</h4>
            <p>Baixa variabilidade sugere cat√°logo homog√™neo; alta variabilidade revela nichos distintos.</p>
        </div>

        <div class="code-block">
            <div class="code-header"><span>üìè Dispers√£o e Outliers</span><button class="copy-button">Copiar</button></div>
<pre><code>cols = [<span class="syntax-string">'duracao_minutos'</span>, <span class="syntax-string">'popularidade'</span>, <span class="syntax-string">'streams_milhoes'</span>]
for col in cols:
    s = df[col]
    iqr = s.quantile(<span class="syntax-number">0.75</span>) - s.quantile(<span class="syntax-number">0.25</span>)
    z = ((s - s.mean())/s.std()).abs()
    out_iqr = ((s &lt; s.quantile(<span class="syntax-number">0.25</span>) - <span class="syntax-number">1.5</span>*iqr) | (s &gt; s.quantile(<span class="syntax-number">0.75</span>) + <span class="syntax-number">1.5</span>*iqr))).sum()
    out_z = (z &gt; <span class="syntax-number">3</span>).sum()
    print(f"{col}: var={s.var():.3f} | std={s.std():.3f} | IQR={iqr:.3f} | outliers(IQR)={out_iqr} | outliers(Z&gt;3)={out_z}")</code></pre>
        </div>
    </div>

    <!-- Passo 4: Correla√ß√£o -->
    <div class="step-container">
        <div class="step-header">
            <div class="step-number">4</div>
            <h2 class="step-title">Correla√ß√£o & Regress√£o Simples</h2>
        </div>
        <div class="stats-badge">üîó Correla√ß√£o</div>
        <p class="step-description">Matriz de correla√ß√£o e regress√£o simples de <em>dancabilidade</em> ‚Üí <em>popularidade</em>.</p>

        <div class="code-block">
            <div class="code-header"><span>üîó Correla√ß√£o</span><button class="copy-button">Copiar</button></div>
<pre><code>num_cols = [<span class="syntax-string">'energia'</span>,<span class="syntax-string">'valencia'</span>,<span class="syntax-string">'dancabilidade'</span>,
            <span class="syntax-string">'acousticness'</span>,<span class="syntax-string">'liveness'</span>,<span class="syntax-string">'duracao_minutos'</span>,
            <span class="syntax-string">'popularidade'</span>,<span class="syntax-string">'streams_milhoes'</span>]
corr = df[num_cols].corr()
print(corr[<span class="syntax-string">'popularidade'</span>].sort_values(ascending=<span class="syntax-keyword">False</span>))</code></pre>
        </div>

        <div class="code-block">
            <div class="code-header"><span>üìà Regress√£o (OLS) ‚Äì Dancabilidade ‚Üí Popularidade</span><button class="copy-button">Copiar</button></div>
<pre><code>from sklearn.linear_model import LinearRegression
X = df[[<span class="syntax-string">'dancabilidade'</span>]].values
y = df[<span class="syntax-string">'popularidade'</span>].values
reg = LinearRegression().fit(X,y)
print(<span class="syntax-string">f"coeficiente: {reg.coef_[0]:.2f} | intercepto: {reg.intercept_:.2f} | R¬≤: {reg.score(X,y):.3f}"</span>)</code></pre>
        </div>
    </div>

    <!-- Passo 5: Testes de Hip√≥tese -->
    <div class="step-container">
        <div class="step-header">
            <div class="step-number">5</div>
            <h2 class="step-title">Testes de Hip√≥tese</h2>
        </div>
        <div class="stats-badge">üß™ Infer√™ncia</div>
        <p class="step-description">Ex.: Pop vs Rock ‚Äî popularidade m√©dia √© diferente?</p>

        <div class="code-block">
            <div class="code-header"><span>üß™ t-test (Pop √ó Rock)</span><button class="copy-button">Copiar</button></div>
<pre><code>pop = df.query(<span class="syntax-string">"genero == 'Pop'"</span>)[<span class="syntax-string">'popularidade'</span>]
rock = df.query(<span class="syntax-string">"genero == 'Rock'"</span>)[<span class="syntax-string">'popularidade'</span>]
t,p = stats.ttest_ind(pop, rock, equal_var=<span class="syntax-keyword">False</span>)
print(<span class="syntax-string">f"t={t:.3f} | p={p:.4f} ‚Üí "</span>, <span class="syntax-string">"diferen√ßa significativa"</span> <span class="syntax-keyword">if</span> p&lt;<span class="syntax-number">0.05</span> <span class="syntax-keyword">else</span> <span class="syntax-string">"sem evid√™ncia de diferen√ßa"</span>)</code></pre>
        </div>
    </div>

    <!-- Passo 6: Visualiza√ß√µes -->
    <div class="step-container">
        <div class="step-header">
            <div class="step-number">6</div>
            <h2 class="step-title">Visualiza√ß√µes</h2>
        </div>
        <div class="stats-badge">üìä Gr√°ficos</div>
        <p class="step-description">Histogramas, boxplots por g√™nero e mapa de calor da correla√ß√£o.</p>

        <div class="code-block">
            <div class="code-header"><span>üìä Exemplos de Gr√°ficos</span><button class="copy-button">Copiar</button></div>
<pre><code><span class="syntax-comment"># Histograma da popularidade</span>
sns.histplot(df[<span class="syntax-string">'popularidade'</span>], bins=<span class="syntax-number">30</span>); plt.title(<span class="syntax-string">'Distribui√ß√£o da Popularidade'</span>); plt.show()

<span class="syntax-comment"># Boxplot de popularidade por g√™nero</span>
sns.boxplot(data=df, x=<span class="syntax-string">'genero'</span>, y=<span class="syntax-string">'popularidade'</span>); plt.xticks(rotation=<span class="syntax-number">45</span>); plt.show()

<span class="syntax-comment"># Heatmap de correla√ß√£o</span>
sns.heatmap(df[num_cols].corr(), annot=<span class="syntax-keyword">True</span>, fmt=<span class="syntax-string">'.2f'</span>); plt.show()</code></pre>
        </div>
    </div>

    <div class="warning-box">
        <h4>‚ö†Ô∏è Boas Pr√°ticas</h4>
        <ul class="list">
            <li>Cheque suposi√ß√µes do teste (normalidade/vari√¢ncias) quando necess√°rio.</li>
            <li>Use transforma√ß√£o log em distribui√ß√µes fortemente assim√©tricas para compara√ß√£o.</li>
            <li>Evite superinterpreta√ß√µes: correla√ß√£o n√£o implica causalidade.</li>
        </ul>
    </div>

    <p class="subtitle" style="text-align:center;margin-top:10px">‚úîÔ∏è Documento finalizado e validado ‚Äî todas as tags est√£o fechadas.</p>
</div>

<script>
// Copiar conte√∫do dos blocos de c√≥digo
document.querySelectorAll('.code-block').forEach(block => {
  const btn = block.querySelector('.copy-button');
  if (!btn) return;
  btn.addEventListener('click', async () => {
    const code = block.querySelector('pre').innerText;
    try{
      await navigator.clipboard.writeText(code);
      const original = btn.textContent;
      btn.textContent = 'Copiado!';
      btn.classList.add('copy-success');
      setTimeout(()=>{ btn.textContent = original; btn.classList.remove('copy-success'); }, 1400);
    }catch(e){
      // fallback
      const textarea = document.createElement('textarea');
      textarea.value = code; document.body.appendChild(textarea);
      textarea.select(); document.execCommand('copy'); textarea.remove();
      btn.textContent = 'Copiado!';
      setTimeout(()=>{ btn.textContent = 'Copiar'; }, 1400);
    }
  });
});
</script>
</body>
</html>
